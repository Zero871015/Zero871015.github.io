function showAwardNotifyWindow(){if(textarr.length!=0){var n=textarr[0].split("|"),t=$("#awardNotifyWindow"),i;$("#awardNotifyWindowSerialNumberText").text("第"+n[2]+"期");$("#awardNotifyWindowLotteryNameText").text("恭喜您"+n[0]+"中");$("#awardNotifyWindowMoneyText").text(n[1]+"元");t.show(1e3);i=n[1]<=10?1500:n[1]<=100?3e3:n[1]<=1e3?5e3:7e3;awardNotifyWindowTimer=setTimeout(function(){t.hide(500);showAwardNotifyWindow()},i);textarr.shift()}}function DisplayAutoBonus(){var n=$("#mainFrame").contents(),t=$("#AutoBonusPermission").val();t=="true"&&($("#AutoBonusTopMenuBar").css("display",""),$("#AutoBonusLeftMenuBar",n).css("display",""))}function InnerDisplayAutoBonus(){var n=$("#AutoBonusPermission",parent.document).val();n=="true"&&$("#AutoBonusLeftMenuBar").css("display","")}function displayDividendContract(){var n=$("#mainFrame").contents(),t=$("#haveMyDividendContract").val(),i=$("#haveDividendContractPermission").val();t=="true"&&($("#myContractTopMenuBar").css("display",""),$("#myContractLeftMenuBar",n).css("display",""));i=="true"&&($("#dividendRecordTopMenuBar").css("display",""),$("#dividendRecordLeftMenuBar",n).css("display",""))}function InnerdisplayDividendContract(){var n=getTopWindow().document,t=$("#haveMyDividendContract",n).val(),i=$("#haveDividendContractPermission",n).val();t=="true"&&$("#myContractLeftMenuBar").css("display","");i=="true"&&$("#dividendRecordLeftMenuBar").css("display","")}function displayDailyPayContent(){var n=$("#mainFrame").contents(),t=$("#haveMyDailyPayContent").val(),i=$("#haveDailyPayContentPermission").val();t=="true"&&($("#myDailyPayTopMenuBar").css("display",""),$("#myDailyPayTabsMenuBar",n).css("display",""));i=="true"&&($("#dailyPayRecordTopMenuBar").css("display",""),$("#dailyPayRecordTabsMenuBar",n).css("display",""))}function InnerDisplayDailyPayContent(){var n=getTopWindow().document,t=$("#haveMyDailyPayContent",n).val(),i=$("#haveDailyPayContentPermission",n).val();t=="true"&&$("#myDailyPayTabsMenuBar").css("display","");i=="true"&&$("#dailyPayRecordTabsMenuBar").css("display","")}function DisplaySettingDividendContract(){var n=getTopWindow().document,t=$("#haveMyDividendContract",n).val(),i=$("#haveDividendContractPermission",n).val();(t=="true"||i=="true")&&$("#dividendContractTabsMenuBar").css("display","")}function DisplayTransferPoint(){var n=getTopWindow().document,t=$("#IsEnabledTransferPoint",n).val();t=="true"&&$("#transferPointMenuBar").css("display","")}function startLotterGameHub(){typeof IsCordova!="undefined"&&($.connection.hub.url=CombinationURL("/signalr"),$.connection.hub.qs={authtoken:window.localStorage.Token},signalrGlobalOptions.withCredentials=!1);$.connection.hub.start(signalrGlobalOptions).done(function(){lotterygameInitialized=!0})}function lotterygameInitializeDelayExecute(n){lotterygameInitialized==!0?n():setTimeout(function(){lotterygameInitializeDelayExecute(n)},1e3)}function homestartcountdown(n,t){var i=(new Date).valueOf()+(t-n)*1e3;$("#remainedtime").countdown(i.toString()).on("update.countdown",function(n){$(this).text(n.strftime("%H'%M\"%S"))}).on("finish.countdown",function(n){nextStartTime!=currentCloseTime&&($(".hour").text("00"),$(".minute").text("00"),$(".second").text("00"),$("#curissue").text("暂停下注"));$(this).text(n.strftime("%H'%M\"%S"));updateHomeIssueInfo(nextSerialNumber,nextCloseTime,nextStartTime)})}function HomeInit(){function i(){var n=this;n.WinAnnouncementInfo=ko.observableArray([])}function r(n){var t=this;t.UserInfoNickName=n.UserInfoNickName;t.LotteryName=n.LotteryName;t.Prize=n.Prize;t.NickName=n.NickName;t.WinAnnouncementMerqueeinfo=ko.computed(function(){return"恭喜"+t.NickName+"獲得獎金"+t.Prize},t)}function t(){var t=$('input[name="__RequestVerificationToken"]').val();$.ajax({type:"Post",url:"/Home/GetWinInfoData",data:{__RequestVerificationToken:t},success:function(t){n.WinAnnouncementInfo($.map(t,function(n){return n!=undefined?new r(n):null}))},dataType:"json"})}GetWalletAmount();$(function(){$("#PopupDialog").dialog({modal:!0,width:800,height:600,buttons:{"确认":function(){$(this).dialog("close")}}})});var n=new i;ko.applyBindings(n,document.getElementById("WinAnnouncementInfo"));t();setInterval(t,WinAnnouncementReflashTime*6e4);$(".DetailsDialogs").dialog({autoOpen:!1,modal:!0,width:480,height:320,modal:!0});$(".Details").click(function(n){var t="Details_"+$(this).attr("id"),i=$(this).text();$("#"+t).dialog("open").dialog({title:i,width:800,height:600,buttons:{"关闭":function(){$(this).dialog("close")}}});n.preventDefault()});$("#WithdrawRequest").click(function(){window.location.replace("/WithdrawRequest/Create")});$("#DepositRequest").click(function(){window.location.replace("/DepositRequest/CreateFast")});$("#gotobet").click(function(){window.location.replace("/Bet/Index/'"+lotteryGameId)})}function ThirdPartyPaymentAndBankDepositCreateInit(){var n=new intToChineseNumberString(!1);$("input[name=BankAccountID]:radio").change(function(){$("#min").text($("input[name=BankAccountID]:checked").attr("data-min"));$("#max").text($("input[name=BankAccountID]:checked").attr("data-max"));$("#alipayAccName").toggle(typeID==DepositAccountType.ALIPAY&&$("input[name=BankAccountID]:checked").attr("data-DepositMethod")==DepositRequestMethod.Deposit)});BankAccountID!=0&&($("input:radio[name=BankAccountID]").filter(DepositMethodTypeClass).filter("[value="+BankAccountID+"]").prop("checked",!0),$("input[name=BankAccountID]:checked").change());$("#back").click(function(){window.location=BackUrl});$("#Amount").keydown(function(){$(this).val().indexOf(".")==-1&&$("#ChineseNumber").text(intToChineseNumberString(!1).getResult($(this).val()))});$("#Amount").keyup(function(){$(this).val().indexOf(".")==-1&&$("#ChineseNumber").text(intToChineseNumberString(!1).getResult($(this).val()))});$("#CancelDeposit").click(function(){confirmMessage("您確定要撤銷申請嗎?<br /><p class='font-p'>若您已充值成功，请您耐心等候。<\/p>",function(){$.post(url,{id:id,__RequestVerificationToken:$('input[name="__RequestVerificationToken"]').val()}).done(function(n){n.IsNotFound?warningMessage("此申请已不存在，若有需要请重新申请。","/ThirdPartyPaymentDepositRequest/ThirdPartyPaymentAndBankDepositCreate"):n.IsInvalid?warningMessage("您的申请已由服务人员处理完成，若还有需要，请重新申请。","/ThirdPartyPaymentDepositRequest/ThirdPartyPaymentAndBankDepositCreate"):warningMessage("撤销申请成功，若有需要请重新申请。","/ThirdPartyPaymentDepositRequest/ThirdPartyPaymentAndBankDepositCreate")}).fail(function(n){IsGlobalAjaxErrorCode(n.status)||warningMessage("撤销失败,请联络服务人员。",null)})})})}function CreateFastInit(){var n=new intToChineseNumberString(!1);$("input[name=BankAccountID]:radio").change(function(){$("#min").text($("input[name=BankAccountID]:checked").attr("data-min"));$("#max").text($("input[name=BankAccountID]:checked").attr("data-max"))});BankAccountID!=0&&($("input:radio[name=BankAccountID]").filter("[value="+BankAccountID+"]").prop("checked",!0),$("input[name=BankAccountID]:radio").change());$("#back").click(function(){window.location=BackUrl});$("#Amount").keydown(function(){$(this).val().indexOf(".")==-1&&$("#ChineseNumber").text(intToChineseNumberString(!1).getResult($(this).val()))});$("#Amount").keyup(function(){$(this).val().indexOf(".")==-1&&$("#ChineseNumber").text(intToChineseNumberString(!1).getResult($(this).val()))});$("#CancelDeposit").click(function(){confirmMessage("您確定要撤銷申請嗎?<br /><p class='font-p'>若您已充值成功，请您耐心等候。<\/p>",function(){$.post(url,{id:id,__RequestVerificationToken:$('input[name="__RequestVerificationToken"]').val()}).done(function(n){n.IsNotFound?warningMessage("此申请已不存在，若有需要请重新申请。","/DepositRequest/CreateFast"):n.IsInvalid?warningMessage("您的申请已由服务人员处理完成，若还有需要，请重新申请。","/DepositRequest/CreateFast"):warningMessage("撤销申请成功，若有需要请重新申请。","/DepositRequest/CreateFast")}).fail(function(n){IsGlobalAjaxErrorCode(n.status)||warningMessage("撤销失败,请联络服务人员。",null)})})})}function ThirdPartyPaymentAndBankDepositCreateInitSubmit(){$("#create").click(function(){var n=$("#form"),i,t;if(n.valid()){if($("#create").prop("disabled",!0),i=parseInt($("#Amount").val()),$("#BankCode").val($("input[name=BankAccountID]:checked").attr("data-id")),minamount=parseInt($("input[name=BankAccountID]:checked").attr("data-min")),maxamount=parseInt($("input[name=BankAccountID]:checked").attr("data-max")),!$.isNumeric(maxamount))return $("#BankAccountValidationMessage").html("请选择入款银行!"),$("#create").attr("disabled",!1),!1;if($("#BankAmountValidationMessage").html(""),i<minamount||i>maxamount)return $("#AmountValidationMessage").html("请输入正确的金额。"),$("#create").attr("disabled",!1),!1;if($("#Name").val($.trim($("#Name").val())),typeID==DepositAccountType.ALIPAY&&$("input[name=BankAccountID]:checked").attr("data-DepositMethod")==DepositRequestMethod.Deposit&&$("#Name").val().length<=0)return $("#NameValidationMessage").html("请输入入款人姓名。"),$("#create").attr("disabled",!1),!1}if($("#DepositMethod").val()==DepositRequestMethod.Deposit)n.submit();else if($("#DepositMethod").val()==DepositRequestMethod.ThirdPartyPaymentDeposit){if($("#form").attr("action","/ThirdPartyPaymentDepositRequest/ThirdPartyPaymentAndBankDepositCreate"),$("input[name=BankAccountID]:checked").attr("data-chooseBank")!=""&&$("input[name=BankAccountID]:checked").attr("data-chooseBank")=="True"&&($("#ThirdPartyPaymentBank").val()==""||$("#ThirdPartyPaymentBank").val()==null))return $("#create").attr("disabled",!1),$("#ThirdBankValidationMessage").html("请选择银行。"),!1;$("#create").prop("disabled",!0);n=$(this).parents("form");n.valid()?(t=window.open(""),$.ajax({type:"POST",url:n.attr("action"),data:n.serialize()}).done(function(n){if(typeof n.Failed!="undefined"&&n.Failed==!0){t.close();$(frameID).html(n.content);return}n.demosite!=undefined?location.reload():(t.document.write(n),t.document.close(),location.reload())}).fail(function(n){IsGlobalAjaxErrorCode(n.status)||(alert("充值失败"),$("#create").prop("disabled",!1))})):$("#create").prop("disabled",!1)}})}function CreateFastSubmit(){$("#create").click(function(){var t=$("#form"),n;if(t.valid()){if($("input[name=BankAccountID]:checked").attr("id")=="CMB"&&$("#Name").val().length<=0)return $("#NameValidationMessage").html("请输入入款人姓名。"),$("#create").attr("disabled",!1),!1;if($("#create").prop("disabled",!0),n=parseInt($("#Amount").val()),$("#BankCode").val($("input[name=BankAccountID]:checked").attr("id")),minamount=parseInt($("input[name=BankAccountID]:checked").attr("data-min")),maxamount=parseInt($("input[name=BankAccountID]:checked").attr("data-max")),!$.isNumeric(maxamount))return $("#BankAccountValidationMessage").html("请选择入款银行!"),$("#create").attr("disabled",!1),!1;if($("#BankAmountValidationMessage").html(""),n<minamount||n>maxamount)return $("#AmountValidationMessage").html("请输入正确的金额。"),$("#create").attr("disabled",!1),!1;t.submit()}})}function CreateFastDepositRequestResultInit(){function n(){var n=(new Date).valueOf()+72e5;$("#remainedValidTime").countdown(n.toString()).on("update.countdown",function(n){$(this).text(n.strftime("%H'%M\"%S"))}).on("finish.countdown",function(n){$(this).text(n.strftime("%H'%M\"%S"));$("#remainedtime").countdown("stop");confirmMessage("您此次充值已超时，为确保您的充值成功建议您重新发起申请。<p class='font-p'>若您已充值成功，请您耐心等候。<\/p><br>是否要重新发起 ?",function(){window.location.replace("/ThirdPartyPaymentDepositRequest/ThirdPartyPaymentAndBankDepositCreate")})})}ClipboardButtonInit();n()}function ThirdPartyPaymentDepositRequestInit(){var n=0,t=0;$("input[name=ThirdPartyPaymentStoreID]:radio").change(function(){$("#min").text($("input[name=ThirdPartyPaymentStoreID]:checked").attr("data-min"));$("#max").text($("input[name=ThirdPartyPaymentStoreID]:checked").attr("data-max"))});$("#create").click(function(){var i,u,r;if($("#create").prop("disabled",!0),i=$(this).parents("form"),i.valid()){if(u=parseInt($("#Amount").val()),n=parseInt($("#min").text()),t=parseInt($("#max").text()),u<n||u>t)return $("#AmountValidation").html("请输入正确的金额。"),$("#create").prop("disabled",!1),!1;r=window.open("");$.ajax({type:"POST",url:i.attr("action"),data:i.serialize()}).done(function(n){if(typeof n.Failed!="undefined"&&n.Failed==!0){r.close();$(frameID).html(n.content);return}n.demosite!=undefined?location.reload():(r.document.write(n),r.document.close(),location.reload())}).fail(function(n){IsGlobalAjaxErrorCode(n.status)||(alert("充值失败"),$("#create").prop("disabled",!1))})}else $("#create").prop("disabled",!1)});$(".ThirdPartyPaymentStoreListMember").click(function(){$("#ThirdPartyPaymentStoreListTitle").html($(this).html());$("#ThirdPartyPaymentStoreID").val($(this).val())});$("#back").click(function(){window.location='@Url.Action("Index", "DepositRequest")'});$("#Amount").keydown(function(){$(this).val().indexOf(".")==-1&&$("#ChineseNumber").text(intToChineseNumberString(!1).getResult($(this).val()))});$("#Amount").keyup(function(){$(this).val().indexOf(".")==-1&&$("#ChineseNumber").text(intToChineseNumberString(!1).getResult($(this).val()))});$("#pay").click(function(){document.getElementById("form1").submit()});$("#CancelDeposit").click(function(){$("#dialog").modal("show");$("#dialog").on("hide.bs.modal",function(){})});$("#CancelConfirm").click(function(){$.post(url,{id:id,__RequestVerificationToken:$('input[name="__RequestVerificationToken"]').val()}).done(function(n){n.IsNotFound?$("#SuccessBody").html("此申请已不存在，若有需要请重新申请。"):n.IsInvalid&&$("#SuccessBody").html("您的申请已由服务人员处理完成，若还有需要，请重新申请。");$("#dialogSuccess").modal("show");$("#dialogSuccess").on("hide.bs.modal",function(){sammyApp.refresh()})}).fail(function(n){IsGlobalAjaxErrorCode(n.status)||alert("failed!")})})}function ThirdPartyPaymentDepositRequestResultInit(){function n(){$("#dialog").modal("show");$("#dialog").on("hide.bs.modal",function(){sammyApp.refresh()})}function t(){var t=(new Date).valueOf()+9e5;$("#remainedValidTime").countdown(t.toString()).on("update.countdown",function(n){$(this).text(n.strftime("%H'%M\"%S"))}).on("finish.countdown",function(t){$(this).text(t.strftime("%H'%M\"%S"));n()})}refreshRedirect("#/ThirdPartyPaymentDepositRequest/Create");$("#Success").dialog({modal:!0,buttons:{Ok:function(){$(this).dialog("close")}}});$(".clipboard").each(function(){clipboard=new Clipboard(document.getElementById($(this).attr("id")))});$("#pay").click(function(){document.getElementById("form1").submit()});t()}function WithdrawRequestCreateInit(){SetKeypad();MaxDrawTimePerDay==0?$("#MaxDrawTimePerDay").html("无限"):$("#MaxDrawTimePerDay").html(MaxDrawTimePerDay);$("#BankCardID").val()!=null?$(".BankListMember").each(function(){$(this).val()==$("#BankCardID").val()&&$("#BankListTitle").html($(this).html())}):$("#BankListTitle").html("请选择银行卡");$("#Amount").keydown(function(){ShowChinesesNumberAndDrawFee()});$("#Amount").keyup(function(){ShowChinesesNumberAndDrawFee()});ShowChinesesNumberAndDrawFee();$(".BankListMember").click(function(){$("#BankListTitle").html($(this).html());$("#BankCardID").val($(this).val())});$("BankCardID").selectedIndex=-1}function ShowChinesesNumberAndDrawFee(){var t=$("#Amount").val(),n;t!=null&&(t.indexOf(".")==-1&&$("#ChineseNumber").text(intToChineseNumberString(!1).getResult(t)),n=0,IsReachBetRequired&&(n=Math.floor(t*percent/100),n=n>minFee?n:minFee),$("#result_withdraw").text(t),$("#result_fee").text(n),$("#result_total").text(t-n<0?"":t-n))}function BindFirstBankCardInit(){BankCardListInit()}function WithdrawRequestCreateSubmit(){var n=$("#form");if(n.valid()){var t=parseInt($("#Amount").val()),i=parseInt($("#mindraw").text()),r=parseInt($("#maxdraw").text());if(t>r)return $("#AmounValidationMessaget").html("提现金额超出最高提款金额"),!1;if(t<i)return $("#AmounValidationMessaget").html("提现金额小于最低提款金额"),!1;if(t<=minFee)return $("#AmounValidationMessaget").html("提现金额必须大于最低手续费"),!1;$("#create").attr("disabled",!0);$.ajax({type:"POST",url:n.attr("action"),data:n.serialize()}).done(function(n){$("#warning-dialog").remove();$("#Container").html(n);WithdrawRequestCreateInit();ShowDialog&&(warningMessage("您的取款申请已提交。",null),$("#dialog").dialog({modal:!0,buttons:{"确认":function(){$(this).dialog("close")}}}));resetValidation();$("#create").attr("disabled",!1)}).fail(function(n){IsGlobalAjaxErrorCode(n.status)||(warningMessage("提现失败，详情请洽客服人员。",null),$("#create").attr("disabled",!1))})}return!1}function BindFirstBankCardSubmit(){var n=$("#form");n.valid()&&($("#submit").attr("disabled",!0),$.ajax({type:"POST",url:n.attr("action"),data:n.serialize()}).done(function(n){if(n.state!=undefined&&n.state==!1){warningMessage(n.text,null);$("#submit").attr("disabled",!1);return}$("#Container").html(n);Success||BindFirstBankCardInit();$("#submit").attr("disabled",!1)}).fail(function(n){IsGlobalAjaxErrorCode(n.status)||(warningMessage("银行卡绑定失败。",null),$("#submit").attr("disabled",!1))}))}function BindFirstBankCardConfirmInit(){$("#Goback").click(function(){var n=$("#form");n.valid()&&$.ajax({type:"POST",url:backUrl,data:n.serialize()}).done(function(n){$("#Container").html(n);BindFirstBankCardInit();resetValidation()}).fail(function(n){IsGlobalAjaxErrorCode(n.status)})});SetKeypad()}function BindFirstBankCardConfirmSubmit(){var n=$("#form");n.valid()&&($("#submit").attr("disabled",!0),$.ajax({type:"POST",url:n.attr("action"),data:n.serialize()}).done(function(n){n.state!=undefined?warningMessage("银行卡绑定成功。","#/MyBankCard/Index"):$("#Container").html(n);$("#submit").attr("disabled",!1)}).fail(function(n){IsGlobalAjaxErrorCode(n.status)||(warningMessage("银行卡绑定失败。",null),$("#submit").attr("disabled",!1))}))}function BindSubsequentBankCardSubmit(){var n=$("#form");n.valid()&&($("#submit").attr("disabled",!0),$.ajax({type:"POST",url:n.attr("action"),data:n.serialize()}).done(function(n){$("#Container").html(n);Success||BindFirstBankCardInit();$("#submit").attr("disabled",!1)}).fail(function(n){IsGlobalAjaxErrorCode(n.status)||(warningMessage("银行卡绑定失败。",null),$("#submit").attr("disabled",!1))}))}function BindSubsequentBankCardConfirmInit(){$("#Goback").click(function(){var n=$("#form");n.valid()&&$.ajax({type:"POST",url:backUrl,data:n.serialize()}).done(function(n){$("#Container").html(n);BindFirstBankCardInit();resetValidation()}).fail(function(n){IsGlobalAjaxErrorCode(n.status)})});SetKeypad()}function BindSubsequentBankCardConfirmSubmit(){var n=$("#form");n.valid()&&($("#submit").attr("disabled",!0),$.ajax({type:"POST",url:n.attr("action"),data:n.serialize()}).done(function(n){n.state!=undefined?warningMessage("银行卡绑定成功。","#/MyBankCard/Index"):$("#Container").html(n);$("#submit").attr("disabled",!1)}).fail(function(n){IsGlobalAjaxErrorCode(n.status)||(warningMessage("银行卡绑定失败。","#/MyBankCard/Index"),$("#submit").attr("disabled",!1))}))}function AwardDetailViewModel(){this.details=ko.observableArray([]);this.maxPerBet=ko.observable();this.maxPerIssue=ko.observable();this.maxPerDanTiao=ko.observable()}function ShowAwardDetail(n){$("#maxPerIssue").text(n.maxIssue.toString());$("#maxPerDanTiao").text(n.maxDanTiao.toString());$.each(n.types,function(t,i){if(i!=undefined){var r=DetailsContent(i,n.floorOdds,n.point,n.offset,n.name),u="<tr class='bdot'><td>%s<\/td><td>%s<\/td><td>%s<\/td><td>%s<\/td><\/tr>";u=u.replace("%s",r.categoryName).replace("%s",r.awardName).replace("%s",r.typeName).replace("%s",r.awardMoney);$("#awardDetails").append(u)}})}function DetailsContent(n,t,i,r,u){var e={},f;e.typeName=n.name;var o="",s="",h=0;for(f=0;f<n.awards.length;f++)n.awards[f]!=undefined&&(o+=n.awards[f].name+"<br>",h=n.awards[f].ReturnBetAmount!=undefined?"返回投注金额":n.awards[f].fixedPrize!=undefined&&n.awards[f].fixedPrize!=0?math.round(n.awards[f].fixedPrize*2,DecimalPrecision):math.round(Math.floor(math.round(math.round(t/20+i-r-n.awards[f].prizeDiscount,4)*n.awards[f].probDeno/n.awards[f].probNume/50*PrecisionPower,DecimalPrecision))/PrecisionPower,DecimalPrecision),s+=h.toString()+"<br>");return e.awardName=o,e.awardMoney=s,e.categoryName=u,e}function AwardDetailInit(){function n(n){$("#awardDetails").empty();for(var t=0;t<awardData.length;t++)if(awardData[t].id==n){ShowAwardDetail(awardData[t]);break}}function t(){var t,n;for($("#EachMaxPrize").empty(),awardData[awardData.length-1]==undefined&&(awardData.length=awardData.length-1),n=1;n<=awardData.length;n++)n%2>0&&(t="<tr class='bdot'><td>%s<\/td><td>%s<\/td><td>%s<\/td><td>%s<\/td><td>%s<\/td><td>%s<\/td><\/tr>"),n%2>0&&n==awardData.length&&(t="<tr class='bdot'><td>%s<\/td><td>%s<\/td><td>%s<\/td><\/tr>"),t=t.replace("%s",awardData[n-1].name).replace("%s",awardData[n-1].maxIssue).replace("%s",awardData[n-1].maxDanTiao),(n%2==0||n==awardData.length)&&$("#EachMaxPrize").append(t)}ShowAwardDetail(awardData[0]);t();$(".LotteryGame").click(function(){n($(this).val())})}function PlayersInit(){$("#create").click(function(){window.location.replace("/AccountManagement/CreateUser")})}function DescendantListInit(){var n=$("#descendantTables").dataTable({bAutoWidth:!0,sScrollX:!1,bPaginate:!0,bFilter:!0,bSort:!0,bInfo:!0,bStateSave:!1,bProcessing:!1,bLengthChange:!1,sDom:'rt<"bottom"ilp>',aLengthMenu:[[10,25,50,-1],["10","25","50","所有"]],iDisplayLength:10,sPaginationType:"full_numbers",bJQueryUI:!1,language:{url:"/Content/dataTables/Chinese.txt"}});$("#searchbt").click(function(){$("#descendantTables").DataTable().columns(0).search($("#loginID_search").val()).draw()})}function BetRecordInit(){BetRecordInitTask()}function ScheduleBetViewModel(n){var t=this;t.IssueSerialNumber=n.IssueSerialNumber;t.Multiple=n.Multiple;t.StateStr=ko.observable(n.StateStr);t.ID=n.ID;t.State=n.State;t.Selected=ko.observable(!1);t.CurrentAmount=n.CurrentAmount;t.AccumulationAmount=n.AccumulationAmount;t.BetSerialNumber=n.BetSerialNumber}function CashFlowRecordInit(){CashFlowRecordInitTask()}function ScheduleRecordInit(){ScheduleRecordInitTask()}function DepositWithdrawRecordInit(){DepositWithdrawRecordInitTask()}function ProfitReportInit(){ProfitReportInitTask()}function TeamBetRecordViewModel(){var n=this;n.betrecords=ko.observableArray([]);n.BetPrizesRcords=ko.observableArray([]);n.errmsg=ko.observable("");n.oldissues=ko.observableArray([]);n.Search=function(){var t=$("#form");if(t.valid()){if($("#LoginID").val().trim()==""&&$("#BetSerialNumber").val().trim()==""){$("#ErrorDialog .modal-title").html("提示讯息");$("#ErrorDialog .modal-body").html("请输入帐号或是交易号");$("#ErrorDialog").modal("show");return}if(!CheckTimeIsValid())return;table=$("#BetRecordTable").dataTable({processing:!0,serverSide:!0,bDestroy:!0,sDom:'rt<"bottom"ilp>',iDisplayLength:25,bLengthChange:!1,bFilter:!1,bSort:!1,sPaginationType:"full_numbers",jQueryUI:!0,language:{url:"/Content/dataTables/Chinese.txt"},ajax:{url:"/TeamBetRecord/Search",type:"POST",data:function(n){n.__RequestVerificationToken=$('input[name="__RequestVerificationToken"]').val();n.StartTime=$("#StartTime").val();n.LoginID=$("#LoginID").val();n.EndTime=$("#EndTime").val();n.State=$("#State").val();n.LotteryGameId=$("#LotteryGameId").val();n.IssueSerialNumber=$("#IssueSerialNumber").val();n.Unit=$("#Unit").val();n.BetSerialNumber=$("#BetSerialNumber").val()},error:function(n){if(!IsGlobalAjaxErrorCode(n.status)){$("#BetRecordTable_processing").css("display","none");$("#DialogErrorMessage").text("发生错误");$("#ErrorDialog").modal("show");return}}},columns:[{"class":"AccountEllipsis",data:"UserInfoLoginID"},{data:"SerialNumber"},{data:function(n){return"("+n.IssueLotteryName+")<br />"+n.BetTypeName}},{data:"IssueSerialNumber"},{data:"CreateTimeStr"},{"class":"NumberEllipsis",data:"Number"},{data:"Cost"},{data:"Prize"},{data:function(n){return"<span 'font_14' id='"+n.ID+"StateStr'>"+n.StateStr+"<\/span><br /><a  class='LinkShow'id='"+n.ID+"' href='#' onclick='return false;' >【详情】<\/a>"}}],fnDrawCallback:function(t){if(t.json.data.result==!1){$("#BetRecordTable_processing").css("display","none");$("#ErrorDialog .modal-body").html("无此用户或是交易号资料");$("#ErrorDialog .modal-title").html("提示讯息");$("#ErrorDialog").modal("show");return}if(t.json.data.NoInput==!1){$("#BetRecordTable_processing").css("display","none");$("#ErrorDialog .modal-body").html("无此用户或是交易号资料");$("#ErrorDialog .modal-title").html("提示讯息");$("#ErrorDialog").modal("show");return}datasource=t.json.data;$(".LinkShow").click(function(){for(var t,u,r,f,e=$(this).attr("id"),i=0;i<datasource.length;i++)if(e==datasource[i].ID){t=datasource[i];$("#CopyMessage").css("display","none");$("#betserialnumberOwnerCopy").attr("data-clipboard-text",t.SerialNumber);$("#ErrorMessage").css("display","none");$("#Wininfo").css("display","none");t.State==BetState.WIN&&$("#Wininfo").css("display","");IssueStateRecord=datasource[i];$("#CancelBet").css("display","none");$("#createBetProposal").css("display","none");t.State==BetState.BET&&$("#CancelBet").css("display","");$("#betserialnumber").text(t.SerialNumber);$("#player").text(t.UserInfoLoginID);$("#lotterygame").text(t.IssueLotteryName);$("#issueserialnumber").text(t.IssueSerialNumber);$("#unit").text(t.Unit);$("#createtime").text(t.CreateTimeStr);$("#count").text(t.Count);$("#total").text(t.Cost);$("#bettype").text(t.BetTypeName);$("#returnpoint").text(t.ReturnAmount);u=GetPositionStr(t.Position,t.IssueLotteryID);$("#betposition").text(u);r=GetWinningNumberStr(t.WinningNumber,t.IssueLotteryID);$("#winningnumber").text(r);$("#winningnumber").attr("title",r);$("#prize").text(t.Prize);$("#state").text(t.StateStr);$("#earn").text(t.EarnedAmount);$("#multiple").text(t.Multiple+"("+t.UnitStr+")");$("#number").val(t.Number);$("#dialog").modal("show");n.BetPrizesRcords(t.BetPrizes);t.IsSingleType&&t.Number.length>=MaxNumberLengthFromText&&(f=$('input[name="__RequestVerificationToken"]').val(),$.ajax({url:"/BetRecord/GetNumber",type:"POST",data:{__RequestVerificationToken:f,id:t.ID},success:function(n){$("#number").val(n)}}));return}})}})}}}function TeamBetRecordInit(){table=$("#BetRecordTable").dataTable({sDom:'rt<"bottom"ilp>',iDisplayLength:25,bLengthChange:!1,bFilter:!1,bSort:!1,jQueryUI:!0,sPaginationType:"full_numbers",language:{url:"/Content/dataTables/Chinese.txt"}});$("#CancelBetDiv").css("display","none");$("#CancelBetDiv").attr("disabled","disabled");$("#createBetProposal").css("display","none");$.ui.dialog.prototype._focusTabbable=$.noop;clipboard=new Clipboard("#betserialnumberOwnerCopy");clipboard.on("success",function(){$("#CopyMessage").css("display","")});$("#confirm").dialog({autoOpen:!1,modal:!0});DateTimePickerInit($("#StartTime"),$("#EndTime"));$(".LotteryGame").click(function(n){n.preventDefault();$("#LotteryGameTitle").html($(this).html());$("#LotteryGameId").val($(this).val());viewmodel.oldissues(oldissues[$(this).index()-1]);$("#SelectedSerialNumberTitle").html("不指定期数");$("#IssueSerialNumber").val("");$(".SerialNumber").click(function(n){n.preventDefault();$("#SelectedSerialNumberTitle").html($(this).html());$(this).index()==0?$("#IssueSerialNumber").val(""):$("#IssueSerialNumber").val($(this).text())})});$(".Unit").click(function(){$("#UnitTitle").html($(this).html());$("#Unit").val($(this).attr("data-unit"))});$(".State").click(function(){$("#StateTitle").html($(this).html());$("#State").val($(this).attr("data-state"))});viewmodel=new TeamBetRecordViewModel;ko.applyBindings(viewmodel,document.getElementById("TeamBetRecord"))}function TeamCashFlowRecordViewModel(){var n=this;n.cashFlowRcords=ko.observableArray([]);n.BetPrizesRcords=ko.observableArray([]);n.scheduRcords=ko.observableArray([]);n.errmsg=ko.observable("");n.oldgames=ko.observableArray([]);n.associatedItemIds=ko.observableArray([]);n.allSelected=ko.observable(!1);n.Checked=function(n){return n.Selected(!n.Selected()),!0};n.SelectAll=function(){var t=n.allSelected();return n.associatedItemIds.removeAll(),ko.utils.arrayForEach(n.scheduRcords(),function(i){i.State==0&&(i.Selected(!t),t||n.associatedItemIds.push(i.ID))}),n.allSelected(!0),!0};n.Show=function(n){var t=$.extend(!0,{},n);n.ScheduleID!=null?(t.ID=t.ScheduleID,ShowScheduleDetailRecord(t,!0)):(t.ID=t.BetID,ShowBetDetailRecord(t))};n.Search=function(){var t=$("#form");if(t.valid()){if($("#LoginID").val().trim()==""&&$("#SerialNumber").val().trim()==""){$("#ErrorDialog .modal-body").html("请输入帐号或是交易号。");$("#ErrorDialog .modal-title").html("提示讯息");$("#ErrorDialog").modal("show");return}if(!CheckTimeIsValid())return;table=$("#CashFlowRecordTable").dataTable({processing:!0,serverSide:!0,bDestroy:!0,sDom:'rt<"bottom"ilp>',iDisplayLength:25,bLengthChange:!1,bFilter:!1,bSort:!1,sPaginationType:"full_numbers",jQueryUI:!0,language:{url:"/Content/dataTables/Chinese.txt"},ajax:{url:"/TeamCashFlowRecord/Search",type:"POST",data:function(n){n.__RequestVerificationToken=$('input[name="__RequestVerificationToken"]').val();n.StartTime=$("#StartTime").val();n.EndTime=$("#EndTime").val();n.Type=$("#Type").val();n.LoginID=$("#LoginID").val();n.SerialNumber=$("#SerialNumber").val()},error:function(n){if(!IsGlobalAjaxErrorCode(n.status)){$("#CashFlowRecordTable_processing").css("display","none");$("#DialogErrorMessage").text("发生错误");$("#ErrorDialog").modal("show");return}}},columns:[{"class":"AccountEllipsis",data:"UserInfoLoginID"},{data:function(n){var t="";return n.BetSerialNumber!=null&&(t=n.BetSerialNumber),n.ScheduleSerialNumber!=null&&(t=n.ScheduleSerialNumber),"<a  class='LinkShow'id='"+n.ID+"' href='#' onclick='return false;' >"+t+"<\/a>"}},{data:function(n){if(Returnpoint[n.Type]==n.Type||DescentantExternalReturnpoint[n.Type]==n.Type)return"活动";switch(n.Type){case CashFlowType.DEPOSIT:case CashFlowType.THIRDPARTYPAYDEPOSIT:case CashFlowType.MANAUALDEPOSIT:case CashFlowType.TRANSFERDEPOSIT:case CashFlowType.COUPONDEPOSITBONUS:return"存款";case CashFlowType.DRAW:case CashFlowType.MANAUALWITHDRAW:case CashFlowType.CANCELLEDDRAW:case CashFlowType.TRANSFERWITHDRAW:return"提款";case CashFlowType.BET:case CashFlowType.SCHEDULE:return"投注";case CashFlowType.PRIZE:case CashFlowType.CANCELPRIZE:return"中奖";case CashFlowType.RETURNPOINT:case CashFlowType.DESCENTANTRETURNPOINT:return"返点";case CashFlowType.MANAUALDEPOSITBONUS:case CashFlowType.MANAUALWITHDRAWBONUS:case CashFlowType.ACTIVITYBONUS:case CashFlowType.LoginIncentive:case CashFlowType.PersonalDaliyTaskIncentive:case CashFlowType.ExtraIncentive:case CashFlowType.ConsumeIncentive:case CashFlowType.WECHATREGISTERATIONBONUS:case CashFlowType.WECHATBETBONUS:case CashFlowType.DepositIncentive:case CashFlowType.SAVEBONUS:case CashFlowType.FIRSTSAVEBONUS:case CashFlowType.TRANSFERWITHDRAWBONUS:case CashFlowType.TRANSFERBONUS:case CashFlowType.TRANSFERDAILYREWARD:case CashFlowType.TRANSFERWITHDRAWDAILYREWARD:case CashFlowType.TRANSFERREDPACKET:case CashFlowType.TRANSFERWITHDRAWREDPACKET:case CashFlowType.BETCOMMISSION:case CashFlowType.CANCELBETCOMMISSION:case CashFlowType.LOSSCOMMISSION:case CashFlowType.CANCELLOSSCOMMISSION:case CashFlowType.DIRECTAGENTBETCOMMISSION:case CashFlowType.CANCELDIRECTAGENTBETCOMMISSION:case CashFlowType.DIRECTAGENTLOSSCOMMISSION:case CashFlowType.CANCELDIRECTAGENTLOSSCOMMISSION:case CashFlowType.MEMBERBETCOMMISSION:case CashFlowType.CANCELMEMBERBETCOMMISSION:case CashFlowType.MEMBERLOSSCOMMISSION:case CashFlowType.CANCELMEMBERLOSSCOMMISSION:case CashFlowType.DIRECTAGENTAUTOSUPPORT:case CashFlowType.DAILYPAYRECEIVE:case CashFlowType.DAILYPAY:case CashFlowType.ExternalGameWeekBonus:case CashFlowType.ExternalGameSportWeekBonus:case CashFlowType.ExternalGameCardWeekBonus:case CashFlowType.ExternalGameFishWeekBonus:case CashFlowType.EXTERANALGAMEAUTOSUPPORT:case CashFlowType.EBET_RETURN_POINT:case CashFlowType.DESCENTANT_EBET_RETURNPOINT:case CashFlowType.COUPONACTIVITYBONUS:case CashFlowType.CONTINUOUSBET:case CashFlowType.EXTERNALGAMECOMMISSION:case CashFlowType.CANCELEXTERNALGAMECOMMISSION:case CashFlowType.EXTERNALGAMEPERIODICRETURNPOINT:case CashFlowType.EXTERNALGAMEDAILYPAY:case CashFlowType.EXTERNALGAMEDAILYPAYRECEIVE:return"活动";case CashFlowType.MANAUALDEPOSITCOMMISSION:case CashFlowType.MANAUALWITHDRAWCOMMISSION:case CashFlowType.TRANSFERCOMMISSION:case CashFlowType.TRANSFERWITHDRAWCOMMISSION:case CashFlowType.TRANSFEROTHER:case CashFlowType.TRANSFERWITHDRAWOTHER:case CashFlowType.PAYBETPROPOSALCOMMISSION:case CashFlowType.RECEIVEBETPROPOSALCOMMISSION:case CashFlowType.DIVIDEND:case CashFlowType.DIVIDENDRECEIVE:case CashFlowType.AUTOBONUS:return"红利";case CashFlowType.BETCANCELLED:case CashFlowType.SCHEDULECANCELLED:case CashFlowType.ISSUECANCELLED:return"撤单";case CashFlowType.DRAWFEE:case CashFlowType.BANKDRAWFEE:return"扣款";default:return""}}},{data:"CreateTimeStr"},{data:function(n){return n.Amount>0?" <p class='font-p'>"+n.Amount+"<\/p>":" <p style='color:green'>"+n.Amount+"<\/p>"}},{data:"Balance"},{data:function(n){switch(n.Type){case CashFlowType.DEPOSIT:return"网银汇款";case CashFlowType.THIRDPARTYPAYDEPOSIT:return"在线存款";case CashFlowType.ISSUECANCELLED:return"未开奖撤单";case CashFlowType.DRAW:case CashFlowType.PRIZE:case CashFlowType.CANCELPRIZE:return n.Note;case CashFlowType.BET:case CashFlowType.RETURNPOINT:return"";case CashFlowType.CANCELLEDDRAW:return n.Note}return n.Note!=null?n.Note:n.TypeStr}}],fnDrawCallback:function(t){if(t.json.data.result==!1){$("#BetRecordTable_processing").css("display","none");$("#ErrorDialog .modal-body").html("无此用户或是交易号资料。");$("#ErrorDialog .modal-title").html("提示讯息");$("#ErrorDialog").modal("show");return}datasource=t.json.data;$(".LinkShow").click(function(){for(var i,r=$(this).attr("id"),t=0;t<datasource.length;t++)r==datasource[t].ID&&(i=datasource[t],n.Show(i),IssueStateRecord=datasource[t])})}})}}}function TeamCashFlowRecordInit(){table=$("#CashFlowRecordTable").dataTable({sDom:'rt<"bottom"ilp>',iDisplayLength:25,bLengthChange:!1,bFilter:!1,bSort:!1,jQueryUI:!0,sPaginationType:"full_numbers",language:{url:"/Content/dataTables/Chinese.txt"}});$("#CancelBetDiv").css("display","none");$("#CancelSchedulelBetDiv").css("display","none");$("#CancelBetDiv").attr("disabled","disabled");$("#CancelSchedulelBetDiv").attr("disabled","disabled");$("#createBetProposal").css("display","none");DateTimePickerInit($("#StartTime"),$("#EndTime"));$(".Type").click(function(n){n.preventDefault();$("#TypeTitle").html($(this).html());$("#Type").val($(this).attr("data-type"))});$.ui.dialog.prototype._focusTabbable=$.noop;$(".clipboard").each(function(){clipboard=new Clipboard(document.getElementById($(this).attr("id")));clipboard.on("success",function(){$(".CopyMessage").css("display","")})});viewmodel=new TeamCashFlowRecordViewModel;ko.applyBindings(viewmodel,document.getElementById("TeamCashFlowRecord"))}function TeamDepositWithdrawRecordViewModel(){var n=this;n.cashFlowRcords=ko.observableArray([]);n.errmsg=ko.observable("");n.Search=function(){var t=$("#form");if(t.valid()){if($("#LoginID").val().trim()==""){$("#ErrorDialog .modal-body").html("请输入帐号。");$("#ErrorDialog .modal-title").html("提示讯息");$("#ErrorDialog").modal("show");return}if(!CheckTimeIsValid())return;$.ajax({type:"POST",url:t.attr("action"),data:t.serialize()}).done(function(t){if(t.length==0?n.errmsg("查无资料"):n.errmsg(""),t.notInput==!1){$("#ErrorDialog .modal-body").html("无此用户资料。");$("#ErrorDialog .modal-title").html("提示讯息");$("#ErrorDialog").modal("show");n.errmsg("查无资料");table!=null&&(table.fnClearTable(),table.fnDestroy());return}n.errmsg("");table!=null&&(table.fnClearTable(),table.fnDestroy());for(var i=0;i<t.length;i++)t[i].RecordType==WithdrawAndDepositRecordType.DEPOSIT&&(t[i].TypeStr="充值"),t[i].RecordType==WithdrawAndDepositRecordType.WITHDRAW&&(t[i].TypeStr="提款");n.cashFlowRcords(t);table=$.fn.dataTable.isDataTable("#WithdrawRecordTable")?$("#WithdrawRecordTable").DataTable():$("#WithdrawRecordTable").dataTable({bAutoWidth:!0,sScrollX:!1,bPaginate:!0,bFilter:!1,bSort:!1,bInfo:!0,bStateSave:!1,bProcessing:!1,bLengthChange:!1,sDom:'rt<"bottom"ilp>',aLengthMenu:[[50,-1],["50","所有"]],iDisplayLength:50,sPaginationType:"full_numbers",bJQueryUI:!0,language:{url:"/Content/dataTables/Chinese.txt"}})}).fail(function(t){IsGlobalAjaxErrorCode(t.status)||n.errmsg("发生错误")})}}}function TeamDepositWithdrawRecordInit(){viewmodel=new TeamDepositWithdrawRecordViewModel;ko.applyBindings(viewmodel,document.getElementById("TeamDepositWithdrawRecord"));table=$("#WithdrawRecordTable").dataTable({bAutoWidth:!0,sScrollX:!1,bPaginate:!0,bFilter:!1,bSort:!1,bInfo:!0,bStateSave:!1,bProcessing:!1,bLengthChange:!1,sDom:'rt<"bottom"ilp>',aLengthMenu:[[50,-1],["50","所有"]],iDisplayLength:50,sPaginationType:"full_numbers",bJQueryUI:!0,language:{url:"/Content/dataTables/Chinese.txt"}});DateTimePickerInit($("#StartTime"),$("#EndTime"));$(".Type").click(function(n){n.preventDefault();$("#TypeTitle").html($(this).html());$("#Type").val($(this).attr("data-type"))});$(".RecordType").click(function(n){n.preventDefault();$("#RecordTypeTitle").html($(this).html());$("#Type").val($(this).val())})}function TeamScheduleRecordViewModel(){var n=this;n.schedulerecords=ko.observableArray([]);n.associatedItemIds=ko.observableArray([]);n.errmsg=ko.observable("");n.oldgames=ko.observableArray([]);n.scheduRcords=ko.observableArray([]);n.allSelected=ko.observable(!1);n.Checked=function(n){return n.Selected(!n.Selected()),!0};n.SelectAll=function(){var t=n.allSelected();return n.associatedItemIds.removeAll(),ko.utils.arrayForEach(n.scheduRcords(),function(i){i.State==0&&(i.Selected(!t),t||n.associatedItemIds.push(i.ID))}),n.allSelected(!0),!0};n.Show=function(n){ShowScheduleDetailRecord(n,!0)};n.Search=function(){var t=$("#form"),i;if(t.valid()){if($("#LoginID").val().trim()==""){$("#ErrorDialog .modal-body").html("请输入帐号。");$("#ErrorDialog .modal-title").html("提示讯息");$("#ErrorDialog").modal("show");return}if(!CheckTimeIsValid())return;i=$("#ScheduleRecordTable").dataTable({processing:!0,serverSide:!0,bDestroy:!0,sDom:'rt<"bottom"ilp>',iDisplayLength:25,bLengthChange:!1,bFilter:!1,bSort:!1,jQueryUI:!0,language:{url:"/Content/dataTables/Chinese.txt"},ajax:{url:"/TeamScheduleRecord/Search",type:"POST",data:function(n){n.__RequestVerificationToken=$('input[name="__RequestVerificationToken"]').val();n.StartTime=$("#StartTime").val();n.EndTime=$("#EndTime").val();n.LoginID=$("#LoginID").val();n.State=$("#State").val();n.LotteryGameId=$("#LotteryGameId").val();n.IssueSerialNumber=$("#IssueSerialNumber").val();n.Unit=$("#Unit").val();n.BetSerialNumber=$("#BetSerialNumber").val()},error:function(n){if(!IsGlobalAjaxErrorCode(n.status)){$("#ScheduleRecordTable_processing").css("display","none");$("#ErrorDialog .modal-body").html("发收错误,详情请洽客服人员。");$("#ErrorDialog .modal-title").html("错误讯息");$("#ErrorDialog").modal("show");return}}},columns:[{"class":"AccountEllipsis",data:"UserInfoLoginID"},{data:"CreateTimeStr"},{data:function(n){return"("+n.LotteryGameName+")<br/>"+n.BetTypeName}},{data:"FirstScheduleBetSerialNumber"},{"class":"NumberEllipsis",data:"Number"},{data:function(n){return n.TotalAmount}},{data:function(n){return n.CompletedAmount}},{data:function(n){return"<span id='"+n.ID+"CancelledAmount'>"+n.CancelledAmount+"<\/span>"}},{data:function(n){return n.StopIfWin==!0?"是":"否"}},{data:function(n){return"<span id='"+n.ID+"StateStr'>"+n.StateStr+"<\/span><br /><a  class='LinkShow'id='"+n.ID+"' href='#' onclick='return false;' >【详情】<\/a>"}}],fnDrawCallback:function(t){if(t.json.data.result==!1){$("#BetRecordTable_processing").css("display","none");$("#ErrorDialog .modal-body").html("无此用户资料。");$("#ErrorDialog .modal-title").html("提示讯息");$("#ErrorDialog").modal("show");return}if(t.json.data.NoInput==!1){$("#BetRecordTable_processing").css("display","none");$("#ErrorDialog .modal-body").html("无此用户资料。");$("#ErrorDialog .modal-title").html("提示讯息");$("#ErrorDialog").modal("show");return}datasource=t.json.data;$(".LinkShow").click(function(){for(var i,r=$(this).attr("id"),t=0;t<datasource.length;t++)r==datasource[t].ID&&(i=datasource[t],n.Show(i),IssueStateRecord=datasource[t])})}})}}}function TeamScheduleRecordInit(){var n=$("#ScheduleRecordTable").dataTable({sDom:'rt<"bottom"ilp>',iDisplayLength:25,bLengthChange:!1,bFilter:!1,bSort:!1,jQueryUI:!0,sPaginationType:"full_numbers",language:{url:"/Content/dataTables/Chinese.txt"}});$("#CancelBetDiv").css("display","none");$("#CancelSchedulelBetDiv").css("display","none");$("#CancelBetDiv").attr("disabled","disabled");$("#CancelSchedulelBetDiv").attr("disabled","disabled");$("#createBetProposal").css("display","none");DateTimePickerInit($("#StartTime"),$("#EndTime"));$(".LotteryGame").click(function(n){n.preventDefault();$("#LotteryGameTitle").html($(this).html());$("#LotteryGameId").val($(this).val());viewmodel.oldgames(oldgames[$(this).index()-1]);$(".SerialNumber").click(function(n){n.preventDefault();$("#SelectedSerialNumberTitle").html($(this).html());$(this).index()==0?$("#GameSerialNumber").val(""):$("#GameSerialNumber").val($(this).text())})});$(".Unit").click(function(){$("#UnitTitle").html($(this).html());$("#Unit").val($(this).attr("data-unit"))});$(".State").click(function(){$("#StateTitle").html($(this).html());$("#State").val($(this).attr("data-state"))});$.ui.dialog.prototype._focusTabbable=$.noop;clipboard=new Clipboard("#schedulebetserialnumberOwnerCopy");clipboard.on("success",function(){$("#CopyMessage").css("display","")});viewmodel=new TeamScheduleRecordViewModel;ko.applyBindings(viewmodel,document.getElementById("TeamScheduleRecord"))}function TeamProfitModel(n){var t=this;t.Profit=n;t.UnderMember=[]}function TempTreeNode(){var n=this;n.UnderMember=[]}function MemberTeamTotalProfit(){var n=this;n.UserName="";n.UserID="";n.AgentID="";n.ReturnPointLevel=0;n.WalletAmount=0;n.Bet=0;n.Prize=0;n.ReturnPoint=0;n.Bonus=0;n.Earn=0;n.Withdraw=0;n.Deposit=0;n.Other=0;n.DepositFee=0;n.AgentBonus=0;n.MySelfReturnPoint=0;n.BetCount=0;n.TeamMemberNumber=0;n.TeamBet=0;n.TeamPrize=0;n.TeamReturnPoint=0;n.TeamBonus=0;n.TeamEarn=0;n.TeamWithdraw=0;n.TeamDeposit=0;n.TeamOther=0;n.TeamDepositFee=0;n.TeamAgentBonus=0;n.TeamMySelfReturnPoint=0;n.TeamBetCount=0;n.TodayBet=0;n.TodayPrize=0;n.TodayReturnPoint=0;n.TodayBonus=0;n.TodayEarn=0;n.TodayWithdraw=0;n.TodayDeposit=0;n.TodayOther=0;n.OfficialBet=0;n.PrivateBet=0;n.ExternalGameBet=0;n.TeamOfficialBet=0;n.TeamPrivateBet=0;n.TeamExternalGameBet=0}function MemberTeamTotalProfitForExternalGame(){var n=this;n.UserName="";n.UserID="";n.AgentID="";n.TeamMemberNumber=0;n.ExternalGameProfitReport=[{Project:"PT",Bet:0,Prize:0,Earn:0,Bonus:0,BetCount:0,TeamBet:0,TeamPrize:0,TeamEarn:0,TeamBonus:0,TeamBetCount:0},{Project:"AG",Bet:0,Prize:0,Earn:0,Bonus:0,BetCount:0,TeamBet:0,TeamPrize:0,TeamEarn:0,TeamBonus:0,TeamBetCount:0},{Project:"总和",Bet:0,Prize:0,Earn:0,Bonus:0,BetCount:0,TeamBet:0,TeamPrize:0,TeamEarn:0,TeamBonus:0,TeamBetCount:0}]}function AllMemberProfitForExternalGame(){self.UserName="";self.TeamBet=0;self.TeamPrize=0;self.TeamEarn=0;self.TeamBonus=0;self.ExternalGameTransferIn=0;self.ExternalGameTransferOut=0;self.UserID="";self.TeamMemberNumber=0}function SearchTreeNode(n,t){var i,r;if(n==t.Profit.UserID)return t;if(t.UnderMember!=null&&typeof t.UnderMember!="undefined")for(i=0;i<t.UnderMember.length;i++)if(r=SearchTreeNode(n,t.UnderMember[i]),r!=null&&typeof r!="undefined")return r}function BuildTree(n,t){if(typeof t[n.Profit.UserID]!="undefined"&&(n.UnderMember=t[n.Profit.UserID].UnderMember),n.UnderMember!=null&&typeof n.UnderMember!="undefined")for(var i=0;i<n.UnderMember.length;i++)BuildTree(n.UnderMember[i],t);return}function ComputeTeamProfit(n,t){if(n.TodayBet+=t.Profit.TodayBet,n.TodayPrize+=t.Profit.TodayPrize,n.TodayReturnPoint+=t.Profit.TodayReturnPoint,n.TodayBonus+=t.Profit.TodayBonus,n.TodayEarn+=t.Profit.TodayEarn,n.TodayWithdraw+=t.Profit.TodayWithdraw,n.TodayDeposit+=t.Profit.TodayDeposit,n.TodayOther+=t.Profit.TodayOther,t.UnderMember!=null&&typeof t.UnderMember!="undefined")for(var i=0;i<t.UnderMember.length;i++)ComputeTeamProfit(n,t.UnderMember[i]);n.TeamBet=t.Profit.TeamBet;n.TeamPrize=t.Profit.TeamPrize;n.TeamReturnPoint=t.Profit.TeamReturnPoint;n.TeamBonus=t.Profit.TeamBonus;n.TeamEarn=t.Profit.TeamEarn;n.TeamWithdraw=t.Profit.TeamWithdraw;n.TeamDeposit=t.Profit.TeamDeposit;n.TeamOther=t.Profit.TeamOther;n.WalletAmount=t.Profit.WalletAmount;n.ReturnPointLevel=t.Profit.ReturnPointLevel;n.TeamMemberNumber=t.Profit.TeamMemberNumber;n.Bet=Math.round(n.Bet*1e3)/1e3;n.Prize=Math.round(n.Prize*1e3)/1e3;n.ReturnPoint=Math.round(n.ReturnPoint*1e3)/1e3;n.Bonus=Math.round(n.Bonus*1e3)/1e3;n.Earn=Math.round(n.Earn*1e3)/1e3;n.Withdraw=Math.round(n.Withdraw*1e3)/1e3;n.Deposit=Math.round(n.Deposit*1e3)/1e3;n.Other=Math.round(n.Other*1e3)/1e3;n.TeamBet=Math.round(n.TeamBet*1e3)/1e3;n.TeamPrize=Math.round(n.TeamPrize*1e3)/1e3;n.TeamReturnPoint=Math.round(n.TeamReturnPoint*1e3)/1e3;n.TeamBonus=Math.round(n.TeamBonus*1e3)/1e3;n.TeamEarn=Math.round(n.TeamEarn*1e3)/1e3;n.TeamWithdraw=Math.round(n.TeamWithdraw*1e3)/1e3;n.TeamDeposit=Math.round(n.TeamDeposit*1e3)/1e3;n.TeamOther=Math.round(n.TeamOther*1e3)/1e3;return}function ComputeTeamMemberProfit(n,t){var i,r;if(t.UnderMember!=null&&typeof t.UnderMember!="undefined")for(i=0;i<t.UnderMember.length;i++)r=new MemberTeamTotalProfit,r.UserName=t.UnderMember[i].Profit.UserName,r.UserID=t.UnderMember[i].Profit.UserID,r.ReturnPointLevel=t.UnderMember[i].Profit.ReturnPointLevel,r.TeamMemberNumber=t.UnderMember[i].Profit.TeamMemberNumber,r.WalletAmount=t.UnderMember[i].Profit.WalletAmount,ComputeTeamProfit(r,t.UnderMember[i]),n.push(r);return}function TeamProfitReportViewModel(){var n=this;n.profitReport=ko.observableArray([]);n.teamProfitReport=ko.observableArray([]);n.teamMemberProfitReport=ko.observableArray([]);n.SearchMember=function(t){var i,r,u;$("#prePage").css("display","");idList.push(t.UserID);i=SearchTreeNode(t.UserID,relationTreeNode);r=new MemberTeamTotalProfit;ComputeTeamProfit(r,i);u=[];ComputeTeamMemberProfit(u,i);n.teamProfitReport(r);n.profitReport(i.Profit);n.teamMemberProfitReport(u);$("#teamResult").html(i.Profit.UserName);$("#personalResult").html(i.Profit.UserName);pageIndex++};n.Query=function(){var t=$("#form");if(t.valid()){if(!CheckTimeIsValid())return;$.ajax({type:"POST",url:t.attr("action"),data:t.serialize()}).done(function(t){var e,f,h,r,i,u,o,s;if(t==!1){$("#ErrorDialog .modal-body").html("无此用户资料。");$("#ErrorDialog .modal-title").html("提示讯息");$("#ErrorDialog").modal("show");return}if($("#mainPage").css("display",""),$("#prePage").css("display","none"),t.teamModel==null){e=new MemberTeamTotalProfit;n.teamProfitReport(e);n.profitReport(e);n.teamMemberProfitReport("");$("#teamResult").html(t.MemberLoinID);$("#personalResult").html(t.MemberLoinID);return}if(t.relation.length==0&&t.teamModel.length==1){n.teamProfitReport(t.teamModel[0]);n.profitReport(t.teamModel[0]);n.teamMemberProfitReport("");$("#teamResult").html(t.teamModel[0].UserName);$("#personalResult").html(t.teamModel[0].UserName);return}for(f=new MemberTeamTotalProfit,f.UserName=t.relation[0].RootAgentLoginID,f.UserID=t.relation[0].RootAgentID,relationTreeNode=new TeamProfitModel(f),r=[],r.push(relationTreeNode),i=0;i<t.relation.length;i++)f=new MemberTeamTotalProfit,f.UserName=t.relation[i].ChildLoginID,f.UserID=t.relation[i].ChildUserID,f.AgentID=t.relation[i].ParentUserID,h=new TeamProfitModel(f),r.push(h);for(i=0;i<t.teamModel.length;i++)for(u=0;u<r.length;u++)r[u].Profit.UserID==t.teamModel[i].UserID&&(r[u].Profit.Bet=t.teamModel[i].Bet,r[u].Profit.Prize=t.teamModel[i].Prize,r[u].Profit.ReturnPoint=t.teamModel[i].ReturnPoint,r[u].Profit.Bonus=t.teamModel[i].Bonus,r[u].Profit.Earn=t.teamModel[i].Earn,r[u].Profit.Withdraw=t.teamModel[i].Withdraw,r[u].Profit.Deposit=t.teamModel[i].Deposit,r[u].Profit.Other=t.teamModel[i].Other);BuildTree(relationTreeNode,r);idList=[];pageIndex=-1;n.profitReport(relationTreeNode.Profit);idList.push(relationTreeNode.Profit.UserID);o=new MemberTeamTotalProfit;ComputeTeamProfit(o,relationTreeNode);n.teamProfitReport(o);$("#teamResult").html(relationTreeNode.Profit.UserName);$("#personalResult").html(relationTreeNode.Profit.UserName);s=[];ComputeTeamMemberProfit(s,relationTreeNode);n.teamMemberProfitReport(s)}).fail(function(n){IsGlobalAjaxErrorCode(n.status)||alert("無此用戶")})}}}function TeamProfitReportInit(){viewmodel=new TeamProfitReportViewModel;ko.applyBindings(viewmodel,document.getElementById("TeamProfitReport"));DateTimePickerInit($("#StartTime"),$("#EndTime"));$("#prePage").click(function(){var t,n,i,r;idList.length!=1&&(t=idList.pop(),t=idList[pageIndex],t!=null)&&(n=SearchTreeNode(t,relationTreeNode),i=new MemberTeamTotalProfit,ComputeTeamProfit(i,n),r=[],ComputeTeamMemberProfit(r,n),viewmodel.teamProfitReport(i),viewmodel.profitReport(n.Profit),viewmodel.teamMemberProfitReport(r),$("#teamResult").html(n.Profit.UserName),$("#personalResult").html(n.Profit.UserName),pageIndex--)})}function ActivityViewModel(){var n=this;n.activities=ko.observableArray()}function ActivityInit(){var n=new ActivityViewModel;ko.applyBindings(n,document.getElementById("activity"));$("#confirmDialog").dialog({autoOpen:!1,modal:!0});$("#messageDialog").dialog({autoOpen:!1,modal:!0});activityModel.forEach(function(t){var i=new Activity(t.title,t.description,t.startTime,t.endTime,t.repeatable,t.accumulations,t.rewards,t.iconFilePath,t.ActivityType),r=t.ActivityConditions;r.forEach(function(n){i.conditions.push(new Condition(i,n.id,n.text,n.value,n.prize,n.isReceivable,n.value2,n.text2,n.BetAmount,n.DepositAmount,n.rewards))});n.activities.push(i)});$("[id^=remainingTime_]").each(function(t){var t=parseInt($(this).attr("id").split("_")[1],10),i=new Date(n.activities()[t].endTime()).valueOf()+864e5;$(this).countdown(i.toString()).on("update.countdown",function(n){$(this).text(n.strftime("%D天 %H'%M\"%S"))}).on("finish.countdown",function(){var i,t;for($(this).text("活动已結束"),i=parseInt($(this).attr("id").split("_")[1],10),t=0;t<n.activities()[i].conditions().length;t++)n.activities()[i].conditions()[t].isReceivable(!1)})});SelectedActivityIndex!=null&&SelectedActivityIndex!=""&&(SelectedActivityIndex==-1?($("#messageDialogText").text("您选择的活动已结束!"),$("#messageDialog").dialog("open").dialog({buttons:{"确定":function(){$(this).dialog("close")}}})):$('.nav-tabs a[href="#'+SelectedActivityIndex+'"]').tab("show"))}function GetActivityInit(n){var t;n=Date.parse(n).valueOf();var r=Date.parse(activityModel[0].StartTime).valueOf(),u=Date.parse(activityModel[0].EndTime).valueOf(),i="";for(t=0;t<activityModel[0].ActivityConditions.length;t++)activityModel[0].ActivityConditions[t]!=undefined&&(activityModel[0].activitytype==ActivityTypes.ConsumeAccumlation||activityModel[0].activitytype==ActivityTypes.ConsumeByLotteryGameActivity?(i+="<div class='titletext evenline'>"+activityModel[0].ActivityConditions[t].text+"<span class='txtGr'>"+activityModel[0].ActivityConditions[t].value+"<\/span> <span class=\"Give\">,可领取<\/span><span class='txtpink'>"+activityModel[0].ActivityConditions[t].prize+"<\/span>元。<\/div>",BetAmount>=activityModel[0].ActivityConditions[t].value&&(activityModel[0].rewards==0&&r<=n&&u>=n&&activityModel[0].AlertGetActivityPrize=="True"&&($("#GetIncentive").attr("disabled",!1),$(".m-button-R").removeClass("disabled"),$(".m-button-R1").removeClass("disabled"),$("#GetIncentive").text("领取奖励")),$("#gettotal").text(activityModel[0].ActivityConditions[t].prize))):activityModel[0].activitytype==ActivityTypes.ConsumeAccumlationRandomPrize?(i+="<div class='titletext evenline'>"+activityModel[0].ActivityConditions[t].text+"<span class='txtGr'>"+activityModel[0].ActivityConditions[t].value+"<\/span> <span class=\"Give\">随机摇奖中奖金额<\/span><span class='txtpink'>"+activityModel[0].ActivityConditions[t].prize+"- <\/span><span class='txtpink'>"+activityModel[0].ActivityConditions[t].prizeUpperBound+"<\/span>元。<\/div>",BetAmount>=activityModel[0].ActivityConditions[t].value&&(activityModel[0].rewards==0&&r<=n&&u>=n&&activityModel[0].AlertGetActivityPrize=="True"&&($("#GetIncentive").attr("disabled",!1),$(".m-button-R").removeClass("disabled"),$(".m-button-R1").removeClass("disabled")),$("#gettotal").text(activityModel[0].ActivityConditions[t].prize))):activityModel[0].activitytype==ActivityTypes.DepositAccumlation?(activityModel[0].ActivityConditions[t].value2!=0?i+="<div class='titletext evenline'>"+activityModel[0].ActivityConditions[t].text+"达<span class='txtGr'>"+activityModel[0].ActivityConditions[t].value+"<\/span>以上 <span>,送<\/span><span class='txtpink'>"+activityModel[0].ActivityConditions[t].prize+"<\/span>元。"+activityModel[0].ActivityConditions[t].text2+"<span class='txtGr2'>"+activityModel[0].ActivityConditions[t].value2+"<\/span>元即可领取。<\/div>":(i+="<div class='titletext evenline'>"+activityModel[0].ActivityConditions[t].text+"<span class='txtGr'>"+activityModel[0].ActivityConditions[t].value+"<\/span> <span>,送<\/span><span class='txtpink'>"+activityModel[0].ActivityConditions[t].prize+"<\/span>元。"+activityModel[0].ActivityConditions[t].text2+"<\/div>",$("#TodayConsume").hide()),DepositAmount>=activityModel[0].ActivityConditions[t].value&&BetAmount>=activityModel[0].ActivityConditions[t].value2&&(activityModel[0].rewards==0&&r<=n&&u>=n&&activityModel[0].AlertGetActivityPrize=="True"&&($("#GetIncentive").attr("disabled",!1),$(".m-button-R").removeClass("disabled"),$(".m-button-R1").removeClass("disabled")),$("#gettotal").text(activityModel[0].ActivityConditions[t].prize))):activityModel[0].activitytype==ActivityTypes.DailyFirstDeposit?(i+="<li>本日首次存款<font class='ft1'>"+activityModel[0].ActivityConditions[t].value+"<\/font>,送<font class='ft2'>"+activityModel[0].ActivityConditions[t].prize+"<\/font>元。"+activityModel[0].ActivityConditions[t].text2+"<\/li>",DepositAmount>=activityModel[0].ActivityConditions[t].value&&(activityModel[0].rewards==0&&r<=n&&u>=n&&activityModel[0].AlertGetActivityPrize=="True"&&($(".m-button-R").removeClass("disabled"),$(".m-button-R1").removeClass("disabled")),$("#gettotal").text(activityModel[0].ActivityConditions[t].prize))):activityModel[0].activitytype==ActivityTypes.DailyMaxDeposit?(i+="<li>本日单笔存款<font class='ft1'>"+activityModel[0].ActivityConditions[t].value+"<\/font>,送<font class='ft2'>"+activityModel[0].ActivityConditions[t].prize+"<\/font>元。"+activityModel[0].ActivityConditions[t].text2+"<\/li>",DepositAmount>=activityModel[0].ActivityConditions[t].value&&(activityModel[0].rewards==0&&r<=n&&u>=n&&($(".m-button-R").removeClass("disabled"),$(".m-button-R1").removeClass("disabled")),$("#gettotal").text(activityModel[0].ActivityConditions[t].prize))):activityModel[0].activitytype==ActivityTypes.ContinuousBet?(i+="<li>连续消费<font class='ft1'>"+activityModel[0].ActivityConditions[t].value2+"<\/font>日,每日消费金额  <font class='ft2'>"+activityModel[0].ActivityConditions[t].value+"<\/font>,送<font class='ft2'>"+activityModel[0].ActivityConditions[t].prize+"<\/font>元。<\/li>",activityModel[0].ContinuousDay==7&&activityModel[0].prize>0&&activityModel[0].AlertGetActivityPrize=="True"&&($("#GetIncentive").attr("disabled",!1),$(".m-button-R").removeClass("disabled"),$(".m-button-R1").removeClass("disabled")),$("#gettotal").text(activityModel[0].prize)):activityModel[0].activitytype==ActivityTypes.ContinuousSign?(i+="<li>签到第<font class='ft1'>"+activityModel[0].ActivityConditions[t].value2+"<\/font>天,每日首次充值金额 <font class='ft2'>"+activityModel[0].ActivityConditions[t].value+"<\/font>元,送<font class='ft2'>"+activityModel[0].ActivityConditions[t].prize+"<\/font>元。<\/li>",DepositAmount>=activityModel[0].ActivityConditions[t].value&&activityModel[0].continuousDay==activityModel[0].ActivityConditions[t].value2&&activityModel[0].AlertGetActivityPrize=="True"&&($("#GetIncentive").attr("disabled",!1),$(".m-button-R").removeClass("disabled"),$(".m-button-R1").removeClass("disabled")),$("#gettotal").text(activityModel[0].prize)):activityModel[0].activitytype==ActivityTypes.EveryDayBet?(i+="<div class='titletext evenline'>连续签到达<span class='txtGr'>"+activityModel[0].ActivityConditions[t].value2+"<\/span>天,每日消费金额达 <span class='txtGr'>"+activityModel[0].ActivityConditions[t].value+"<\/span>元 <span>,送<\/span><span class='txtpink'>"+activityModel[0].ActivityConditions[t].prize+"<\/span>元。<\/div>",activityModel[0].prize>0&&activityModel[0].AlertGetActivityPrize=="True"&&($("#GetIncentive").attr("disabled",!1),$(".m-button-R").removeClass("disabled"),$(".m-button-R1").removeClass("disabled")),$("#gettotal").text(activityModel[0].prize)):activityModel[0].activitytype==ActivityTypes.NewMemberDepositRandomPrize?DepositAmount>=activityModel[0].ActivityConditions[t].value&&(activityModel[0].rewards==0&&r<=n&&u>=n&&activityModel[0].AlertGetActivityPrize=="True"&&($("#GetIncentive").attr("disabled",!1),$(".m-button-R").removeClass("disabled"),$(".m-button-R1").removeClass("disabled")),$("#gettotal").text(activityModel[0].ActivityConditions[t].prize)):activityModel[0].activitytype==ActivityTypes.BetParticularPeriod&&BetAmount>=activityModel[0].ActivityConditions[t].value&&activityModel[0].rewards==0&&r<=n&&u>=n&&activityModel[0].AlertGetActivityPrize=="True"&&($("#GetIncentive").attr("disabled",!1),$("#GetIncentive").text("领取奖励"),$(".m-button-R1").removeClass("disabled")));activityModel[0].rewards>0&&r<=n&&u>=n&&($("#OKget").hide(),$("#NOget").show(),$("#rewards").text(activityModel[0].rewards));$("#condition").html(i)}function MyContractInit(){var n;$("#ConfirmContract").click(function(){$("#ConfirmContractDialog").text("您确定要接受契约吗？");$("#ConfirmContractDialog").dialog({resizable:!1,modal:!1,title:"确认提示",width:500,buttons:{"确定":function(){$(this).dialog("close");$.ajax({type:"POST",url:"/DividendContract/ConfirmContract",data:""}).done(function(){warningMessage("已接受契約內容。","/DividendContract/MyContract");$("#dialog").text("已接受契約內容。");$("#dialog").dialog({modal:!1,buttons:{Ok:function(){$(this).dialog("close");location.replace("/DividendContract/MyContract")}}})}).fail(function(n){IsGlobalAjaxErrorCode(n.status)||(warningMessage("契约失败，详情请洽客服人员。",null),$("#dialog").text("契约失败，详情请洽客服人员。"),$("#dialog").dialog({modal:!1,buttons:{Ok:function(){$(this).dialog("close")}}}))})},"取消":function(){$(this).dialog("close")}}})});$("#RejectContract").click(function(){$("#RejectContractDialog").text("您确定要拒绝契约吗？");$("#RejectContractDialog").dialog({resizable:!1,modal:!1,title:"确认提示",width:500,buttons:{"确定":function(){$(this).dialog("close");$.ajax({type:"POST",url:"/DividendContract/RejectContract",data:""}).done(function(){warningMessage("已拒绝契約內容。","/DividendContract/MyContract");$("#dialog").text("已拒绝契約內容。");$("#dialog").dialog({modal:!1,buttons:{Ok:function(){$(this).dialog("close");location.replace("/DividendContract/MyContract")}}})}).fail(function(n){IsGlobalAjaxErrorCode(n.status)||(warningMessage("拒绝契约失败，详情请洽客服人员。",null),$("#dialog").text("拒绝契约失败，详情请洽客服人员。"),$("#dialog").dialog({modal:!1,buttons:{Ok:function(){$(this).dialog("close")}}}))})},"取消":function(){$(this).dialog("close")}}})});$(".AcceptOutOfPlatform").click(function(){n=$(this).attr("id");$("#AcceptOutOfPlatformDialog").text(" 您确定接受平台外发放？");$("#AcceptOutOfPlatformDialog").dialog({resizable:!1,modal:!1,title:"确认提示",width:500,buttons:{"确定":function(){$(this).dialog("close");$.ajax({type:"POST",url:"/DividendContract/ConfirmOutOfPlatform",data:{ID:n}}).done(function(){$("#dialog").text("已接受平台外发放。");warningMessage("已接受平台外发放。","/DividendContract/MyContract");$("#dialog").dialog({modal:!1,buttons:{Ok:function(){$(this).dialog("close");location.replace("/DividendContract/MyContract")}}})}).fail(function(n){IsGlobalAjaxErrorCode(n.status)||(warningMessage("接受平台外发放失败，详情请洽客服人员。","/DividendContract/MyContract"),$("#dialog").text("接受平台外发放失败，详情请洽客服人员。"),$("#dialog").dialog({modal:!1,buttons:{Ok:function(){$(this).dialog("close")}}}))})},"取消":function(){$(this).dialog("close")}}})});$(".RejectOutOfPlatform").click(function(){n=$(this).attr("name");$("#RejectOutOfPlatformDialog").text("您确定拒绝平台外发放？");$("#RejectOutOfPlatformDialog").dialog({resizable:!1,modal:!1,title:"确认提示",width:500,buttons:{"确定":function(){$(this).dialog("close");$.ajax({type:"POST",url:"/DividendContract/RejectOutOfPlatform",data:{ID:n}}).done(function(){$("#dialog").text("已拒绝平台外发放。");warningMessage("已拒绝平台外发放。","/DividendContract/MyContract");$("#dialog").dialog({modal:!1,buttons:{Ok:function(){$(this).dialog("close");location.replace("/DividendContract/MyContract")}}})}).fail(function(n){IsGlobalAjaxErrorCode(n.status)||(warningMessage("拒绝平台外发放约失败，详情请洽客服人员。",null),$("#dialog").text('拒绝平台外发放约失败，详情请洽客服人员。"。'),$("#dialog").dialog({modal:!1,buttons:{Ok:function(){$(this).dialog("close")}}}))})},"取消":function(){$(this).dialog("close")}}})})}function ExternalGameDividendContractInit(){var n=0,i,t,r;for($("#ExternalGameNewFirstDividendRate").val()!=""&&(n=1),($("#ExternalGameNewSecondDividendSales").val()!=""||$("#ExternalGameNewSecondDividendRate").val()!=""||$("#ExternalGameNewSecondBetCount").val()!="")&&(n=2),($("#ExternalGameNewThirdDividendSales").val()!=""||$("#ExternalGameNewThirdDividendRate").val()!=""||$("#ExternalGameNewThirdBetCount").val()!="")&&(n=3),($("#ExternalGameNewFourthDividendSales").val()!=""||$("#ExternalGameNewFourthDividendRate").val()!=""||$("#ExternalGameNewFourthBetCount").val()!="")&&(n=4),($("#ExternalGameNewFifthDividendSales").val()!=""||$("#ExternalGameNewFifthDividendRate").val()!=""||$("#ExternalGameNewFifthBetCount").val()!="")&&(n=5),($("#ExternalGameNewSixthDividendSales").val()!=""||$("#ExternalGameNewSixthDividendRate").val()!=""||$("#ExternalGameNewSixthBetCount").val()!="")&&(n=6,$("#addExternalRule").css("display","none"),$("#externalpinkPlus").css("display","none")),r=1;r<=n;r++)i="externalgamerule"+r,$("#"+i).css("display","");$("#addExternalRule").click(function(){n>=6||(t="externalgamedeleteRule"+n,$("#"+t).css("display",""),n+=1,t="externalgamedeleteRule"+n,i="externalgamerule"+n,$("#"+i).css("display",""),$("#"+t).css("display",""),n>=6&&($("#addExternalRule").css("display","none"),$("#externalpinkPlus").css("display","none")))});$("#externalpinkPlus").click(function(){n>=6||(t="externalgamedeleteRule"+n,$("#"+t).css("display",""),n+=1,t="externalgamedeleteRule"+n,i="externalgamerule"+n,$("#"+i).css("display",""),$("#"+t).css("display",""),n>=6&&($("#addExternalRule").css("display","none"),$("#externalpinkPlus").css("display","none")))});$(".ExternalDeleteRule").click(function(){$("#addExternalRule").css("display","");$("#externalpinkPlus").css("display","");t="externalgamedeleteRule"+n;i="externalgamerule"+n;$("#"+i).css("display","none");$("#"+t).css("display","none");switch(n){case 1:$("#ExternalGameNewFirstDividendRate").val(null);break;case 2:$("#ExternalGameNewSecondDividendSales").val(null);$("#ExternalGameNewSecondDividendRate").val(null);$("#ExternalGameNewSecondBetCount").val(null);break;case 3:$("#ExternalGameNewThirdDividendSales").val(null);$("#ExternalGameNewThirdDividendRate").val(null);$("#ExternalGameNewThirdBetCount").val(null);break;case 4:$("#ExternalGameNewFourthDividendSales").val(null);$("#ExternalGameNewFourthDividendRate").val(null);$("#ExternalGameNewFourthBetCount").val(null);break;case 5:$("#ExternalGameNewFifthDividendSales").val(null);$("#ExternalGameNewFifthDividendRate").val(null);$("#ExternalGameNewFifthBetCount").val(null);break;case 6:$("#ExternalGameNewSixthDividendSales").val(null);$("#ExternalGameNewSixthDividendRate").val(null);$("#ExternalGameNewSixthBetCount").val(null)}n-=1;t="externalgamedeleteRule"+n;$("#"+t).css("display","")});InvalidRate?($("#Edit").attr("disabled",!1),$("#ContractState").text(StateStr),t="externalgamedeleteRule"+n,$("#"+t).css("display",""),$("#Edit").attr("disabled",!1)):HaveDividendContract==!0&&($("#ExternalGameNewFirstDividendRate").attr("readonly",!0),$("#ExternalGameNewSecondDividendSales").attr("readonly",!0),$("#ExternalGameNewSecondDividendRate").attr("readonly",!0),$("#ExternalGameNewThirdDividendSales").attr("readonly",!0),$("#ExternalGameNewThirdDividendRate").attr("readonly",!0),$("#ExternalGameNewFourthDividendSales").attr("readonly",!0),$("#ExternalGameNewFourthDividendRate").attr("readonly",!0),$("#ExternalGameNewFifthDividendSales").attr("readonly",!0),$("#ExternalGameNewFifthDividendRate").attr("readonly",!0),$("#ExternalGameNewSixthDividendSales").attr("readonly",!0),$("#ExternalGameNewSixthDividendRate").attr("readonly",!0),$("#ExternalGameNewSecondBetCount").attr("readonly",!0),$("#ExternalGameNewThirdBetCount").attr("readonly",!0),$("#ExternalGameNewFourthBetCount").attr("readonly",!0),$("#ExternalGameNewFifthBetCount").attr("readonly",!0),$("#ExternalGameNewSixthBetCount").attr("readonly",!0),$("#ContractState").text(StateStr));HaveDividendContract==!1&&($("#DescendantLoginID").val(DescendantLoginID),$("#ContractState").text(StateStr));$("#EditContract").click(function(){$("#ExternalGameNewFirstDividendRate").attr("readonly",!1);$("#ExternalGameNewSecondDividendSales").attr("readonly",!1);$("#ExternalGameNewSecondDividendRate").attr("readonly",!1);$("#ExternalGameNewThirdDividendSales").attr("readonly",!1);$("#ExternalGameNewThirdDividendRate").attr("readonly",!1);$("#ExternalGameNewFourthDividendSales").attr("readonly",!1);$("#ExternalGameNewFourthDividendRate").attr("readonly",!1);$("#ExternalGameNewFifthDividendSales").attr("readonly",!1);$("#ExternalGameNewFifthDividendRate").attr("readonly",!1);$("#ExternalGameNewSixthDividendSales").attr("readonly",!1);$("#ExternalGameNewSixthDividendRate").attr("readonly",!1);$("#ExternalGameNewSecondBetCount").attr("readonly",!1);$("#ExternalGameNewThirdBetCount").attr("readonly",!1);$("#ExternalGameNewFourthBetCount").attr("readonly",!1);$("#ExternalGameNewFifthBetCount").attr("readonly",!1);$("#ExternalGameNewSixthBetCount").attr("readonly",!1);t="externalgamedeleteRule"+n;$("#"+t).css("display","");$("#Edit").attr("disabled",!1);$("#addExternalRule").attr("disabled",!1);n>=6?($("#externalpinkPlus").css("display","none"),$("#addExternalRule").css("display","none")):($("#addExternalRule").css("display",""),$("#externalpinkPlus").css("display",""))});$("#CancelDividendContractSubmit").click(function(){var n=$("#form");return n.valid()&&$.ajax({type:"POST",url:"/DividendContract/CancelSubmit",data:n.serialize()}).done(function(){warningMessage("已撤销契约申请，若有需要请重新发起。","/DividendContract/Create?LoginID="+$("#DescendantLoginID").val());$("#dialog").text("已撤销契约申请，若有需要请重新发起。");$("#dialog").show();$("#dialog").dialog({resizable:!1,modal:!1,title:"确认提示",width:500,buttons:{"确定":function(){$(this).dialog("close")}}});$("#ExternalGameNewFirstDividendRate").attr("readonly",!1);$("#ExternalGameNewSecondDividendSales").attr("readonly",!1);$("#ExternalGameNewSecondDividendRate").attr("readonly",!1);$("#ExternalGameNewThirdDividendSales").attr("readonly",!1);$("#ExternalGameNewThirdDividendRate").attr("readonly",!1);$("#ExternalGameNewFourthDividendSales").attr("readonly",!1);$("#ExternalGameNewFourthDividendRate").attr("readonly",!1);$("#ExternalGameNewFifthDividendSales").attr("readonly",!1);$("#ExternalGameNewFifthDividendRate").attr("readonly",!1);$("#ExternalGameNewSixthDividendSales").attr("readonly",!1);$("#ExternalGameNewSixthDividendRate").attr("readonly",!1);$("#ExternalGameNewSecondBetCount").attr("readonly",!1);$("#ExternalGameNewThirdBetCount").attr("readonly",!1);$("#ExternalGameNewFourthBetCount").attr("readonly",!1);$("#ExternalGameNewFifthBetCount").attr("readonly",!1);$("#ExternalGameNewSixthBetCount").attr("readonly",!1)}).fail(function(n){IsGlobalAjaxErrorCode(n.status)||(warningMessage("契约失败，详情请洽客服人员。",null),$("#dialog").text("契约失败，详情请洽客服人员。"),$("#dialog").show(),$("#dialog").dialog({resizable:!1,modal:!1,title:"确认提示",width:500,buttons:{"确定":function(){$(this).dialog("close")}}}))}),!1})}function DividendContractInit(){var n=1,i,r,t,f=$("#NewSixthDividendRate").val(),u;for(($("#NewSecondDividendSales").val()!=""||$("#NewSecondDividendRate").val()!=""||$("#NewSecondBetCount").val()!="")&&(n=2),($("#NewThirdDividendSales").val()!=""||$("#NewThirdDividendRate").val()!=""||$("#NewThirdBetCount").val()!="")&&(n=3),($("#NewFourthDividendSales").val()!=""||$("#NewFourthDividendRate").val()!=""||$("#NewFourthBetCount").val()!="")&&(n=4),($("#NewFifthDividendSales").val()!=""||$("#NewFifthDividendRate").val()!=""||$("#NewFifthBetCount").val()!="")&&(n=5),($("#NewSixthDividendSales").val()!=""||$("#NewSixthDividendRate").val()!=""||$("#NewSixthBetCount").val()!="")&&(n=6,$("#addRule").css("display","none"),$("#pinkPlus").css("display","none")),u=2;u<=n;u++)i="rule"+u,r="ruleHr"+u,$("#"+i).css("display",""),$("#"+r).css("display","");$("#addRule").click(function(){n>=6||(t="deleteRule"+n,$("#"+t).css("display",""),n+=1,t="deleteRule"+n,i="rule"+n,r="ruleHr"+n,$("#"+i).css("display",""),$("#"+r).css("display",""),$("#"+t).css("display",""),n>=6&&($("#addRule").css("display","none"),$("#pinkPlus").css("display","none")))});$("#pinkPlus").click(function(){n>=6||(t="deleteRule"+n,$("#"+t).css("display",""),n+=1,t="deleteRule"+n,i="rule"+n,r="ruleHr"+n,$("#"+i).css("display",""),$("#"+r).css("display",""),$("#"+t).css("display",""),n>=6&&($("#addRule").css("display","none"),$("#pinkPlus").css("display","none")))});$(".deleteRule").click(function(){$("#addRule").css("display","");$("#pinkPlus").css("display","");t="deleteRule"+n;i="rule"+n;r="ruleHr"+n;$("#"+i).css("display","none");$("#"+r).css("display","none");$("#"+t).css("display","none");switch(n){case 1:$("#NewFirstDividendRate").val(null);break;case 2:$("#NewSecondDividendSales").val(null);$("#NewSecondDividendRate").val(null);$("#NewSecondBetCount").val(null);break;case 3:$("#NewThirdDividendSales").val(null);$("#NewThirdDividendRate").val(null);$("#NewThirdBetCount").val(null);break;case 4:$("#NewFourthDividendSales").val(null);$("#NewFourthDividendRate").val(null);$("#NewFourthBetCount").val(null);break;case 5:$("#NewFifthDividendSales").val(null);$("#NewFifthDividendRate").val(null);$("#NewFifthBetCount").val(null);break;case 6:$("#NewSixthDividendSales").val(null);$("#NewSixthDividendRate").val(null);$("#NewSixthBetCount").val(null)}n-=1;t="deleteRule"+n;$("#"+t).css("display","")});InvalidRate?($("#Edit").attr("disabled",!1),$("#ContractState").text(StateStr),t="deleteRule"+n,$("#"+t).css("display",""),$("#Edit").attr("disabled",!1)):HaveDividendContract==!0&&($("#NewFirstDividendRate").attr("readonly",!0),$("#NewSecondDividendSales").attr("readonly",!0),$("#NewSecondDividendRate").attr("readonly",!0),$("#NewThirdDividendSales").attr("readonly",!0),$("#NewThirdDividendRate").attr("readonly",!0),$("#NewFourthDividendSales").attr("readonly",!0),$("#NewFourthDividendRate").attr("readonly",!0),$("#NewFifthDividendSales").attr("readonly",!0),$("#NewFifthDividendRate").attr("readonly",!0),$("#NewSixthDividendSales").attr("readonly",!0),$("#NewSixthDividendRate").attr("readonly",!0),$("#NewSecondBetCount").attr("readonly",!0),$("#NewThirdBetCount").attr("readonly",!0),$("#NewFourthBetCount").attr("readonly",!0),$("#NewFifthBetCount").attr("readonly",!0),$("#NewSixthBetCount").attr("readonly",!0),$("#ContractState").text(StateStr));HaveDividendContract==!1&&($("#DescendantLoginID").val(DescendantLoginID),$("#ContractState").text(StateStr));$("#EditContract").click(function(){$("#NewFirstDividendRate").attr("readonly",!1);$("#NewSecondDividendSales").attr("readonly",!1);$("#NewSecondDividendRate").attr("readonly",!1);$("#NewThirdDividendSales").attr("readonly",!1);$("#NewThirdDividendRate").attr("readonly",!1);$("#NewFourthDividendSales").attr("readonly",!1);$("#NewFourthDividendRate").attr("readonly",!1);$("#NewFifthDividendSales").attr("readonly",!1);$("#NewFifthDividendRate").attr("readonly",!1);$("#NewSixthDividendSales").attr("readonly",!1);$("#NewSixthDividendRate").attr("readonly",!1);$("#NewSecondBetCount").attr("readonly",!1);$("#NewThirdBetCount").attr("readonly",!1);$("#NewFourthBetCount").attr("readonly",!1);$("#NewFifthBetCount").attr("readonly",!1);$("#NewSixthBetCount").attr("readonly",!1);t="deleteRule"+n;$("#"+t).css("display","");$("#Edit").attr("disabled",!1);$("#addRule").attr("disabled",!1);n>=6?($("#pinkPlus").css("display","none"),$("#addRule").css("display","none")):($("#addRule").css("display",""),$("#pinkPlus").css("display",""))});$("#CancelDividendContractSubmit").click(function(){var n=$("#form");return n.valid()&&$.ajax({type:"POST",url:"/DividendContract/CancelSubmit",data:n.serialize()}).done(function(){warningMessage("已撤销契约申请，若有需要请重新发起。","/DividendContract/Create?LoginID="+$("#DescendantLoginID").val());$("#dialog").text("已撤销契约申请，若有需要请重新发起。");$("#dialog").show();$("#dialog").dialog({resizable:!1,modal:!1,title:"确认提示",width:500,buttons:{"确定":function(){$(this).dialog("close")}}});$("#NewFirstDividendRate").attr("readonly",!1);$("#NewSecondDividendSales").attr("readonly",!1);$("#NewSecondDividendRate").attr("readonly",!1);$("#NewThirdDividendSales").attr("readonly",!1);$("#NewThirdDividendRate").attr("readonly",!1)}).fail(function(n){IsGlobalAjaxErrorCode(n.status)||(warningMessage("契约失败，详情请洽客服人员。",null),$("#dialog").text("契约失败，详情请洽客服人员。"),$("#dialog").show(),$("#dialog").dialog({resizable:!1,modal:!1,title:"确认提示",width:500,buttons:{"确定":function(){$(this).dialog("close")}}}))}),!1})}function DividendContractEditSubmit(){var n=$("#form");return n.valid()&&$.ajax({type:"POST",url:"/DividendContract/Edit",data:n.serialize()}).done(function(n){if($("#warning-dialog").remove(),$("#Container").html(n),DividendContractInit(),InvalidRate)return warningMessage("您的契约规则不合理，请重新设定。",null),$("#dialog").text("您的契约规则不合理，请重新设定。"),$("#dialog").show(),$("#dialog").dialog({resizable:!1,modal:!1,title:"确认提示",width:500,buttons:{"确定":function(){$(this).dialog("close")}}}),!1;warningMessage("已发起契约，请等待下级回覆。",null);$("#dialog").text("已发起契约，请等待下级回覆。");$("#dialog").show();$("#dialog").dialog({resizable:!1,modal:!1,title:"确认提示",width:500,buttons:{"确定":function(){$(this).dialog("close")}}});$("#FirstDividendRate").attr("readonly",!1);$("#SecondDividendSales").attr("readonly",!1);$("#SecondDividendRate").attr("readonly",!1);$("#ThirdDividendSales").attr("readonly",!1);$("#ThirdDividendRate").attr("readonly",!1)}).fail(function(n){IsGlobalAjaxErrorCode(n.status)||(warningMessage("契约失败，详情请洽客服人员。",null),$("#dialog").text("契约失败，详情请洽客服人员。"),$("#dialog").show(),$("#dialog").dialog({resizable:!1,modal:!1,title:"确认提示",width:500,buttons:{"确定":function(){$(this).dialog("close")}}}))}),!1}function DividendContractSubmit(){var n=$("#form");return n.valid()&&$.ajax({type:"POST",url:n.attr("action"),data:n.serialize()}).done(function(n){if($("#warning-dialog").remove(),$("#Container").html(n),DividendContractInit(),InvalidRate){warningMessage("您的契约规则不合理，请重新设定。",null);$("#dialog").text("您的契约规则不合理，请重新设定。");$("#dialog").show();$("#dialog").dialog({resizable:!1,modal:!1,title:"确认提示",width:500,buttons:{"确定":function(){$(this).dialog("close")}}});return}warningMessage("已发起契约，请等待下级回覆。",null);$("#dialog").text("已发起契约，请等待下级回覆。");$("#dialog").show();$("#dialog").dialog({resizable:!1,modal:!1,title:"确认提示",width:500,buttons:{"确定":function(){$(this).dialog("close")}}});$("#FirstDividendRate").attr("readonly",!0);$("#SecondDividendSales").attr("readonly",!0);$("#SecondDividendRate").attr("readonly",!0);$("#ThirdDividendSales").attr("readonly",!0);$("#ThirdDividendRate").attr("readonly",!0)}).fail(function(n){IsGlobalAjaxErrorCode(n.status)||(warningMessage("契约失败，详情请洽客服人员。",null),$("#dialog").text("契约失败，详情请洽客服人员。"),$("#dialog").show(),$("#dialog").dialog({resizable:!1,modal:!1,title:"确认提示",width:500,buttons:{"确定":function(){$(this).dialog("close")}}}))}),!1}function AutoBonusRecordInit(){var n=$('input[name="__RequestVerificationToken"]').val();table=$("#AutoBonusRecordTable").dataTable({sDom:'rt<"bottom"ilp>',iDisplayLength:25,bLengthChange:!1,bFilter:!1,bDestroy:!0,bSort:!0,order:[[2,"desc"]],language:{url:"/Content/dataTables/Chinese.txt"}});$("#search").click(function(){table=$("#AutoBonusRecordTable").dataTable({processing:!0,serverSide:!0,bDestroy:!0,sDom:'rt<"bottom"ilp>',iDisplayLength:25,bLengthChange:!1,bFilter:!1,bSort:!0,order:[[2,"desc"]],language:{url:"/Content/dataTables/Chinese.txt"},ajax:{url:"/AutoBonus/Search",type:"POST",data:function(n){n.__RequestVerificationToken=$('input[name="__RequestVerificationToken"]').val();n.DateSection=$("#DateSection").val();n.Type=$("#Type").val();n.DescendantLoginID=$("#DescendantLoginID").val()},error:function(n){if(!IsGlobalAjaxErrorCode(n.status)){$("#ErrorDialog .modal-body").html("发收错误,详情请洽客服人员。");$("#ErrorDialog .modal-title").html("错误讯息");$("#ErrorDialog").modal("show");return}}},columns:[{Name:"LoginID",data:"LoginID"},{Name:"StartTime",data:"StartTimeStr"},{Name:"EndTime",data:"EndTimeStr"},{Name:"BetAmount",data:"BetAmount"},{Name:"BetPercentage",data:"BetPercentage"},{Name:"BetProfit",data:"BetProfit"},{Name:"BetBonus",data:"BetBonus"},{data:function(n){return n.AutoBonusState==AutoBonusState.DONE?"发放完毕":n.AutoBonusState==AutoBonusState.ONGOING?"尚未发放":n.AutoBonusState==AutoBonusState.CANCEL?"不需分紅":""},orderable:!1}]})})}function DividendRecordInit(){var i=$('input[name="__RequestVerificationToken"]').val(),n,t;table=$("#DividendRecordTable").dataTable({sDom:'rt<"bottom"ilp>',iDisplayLength:25,bLengthChange:!1,bFilter:!1,bDestroy:!0,bSort:!1,language:{url:"/Content/dataTables/Chinese.txt"}});DateTimePickerInit($("#StartTime"),$("#EndTime"));$("#search").click(function(){var r=getTopWindow();CheckTimeIsValid()&&($("#GameTypeId").val()==0?($("#ExternalGameDividendRecordTable").css("display","none"),$("#ExternalGameDividendRecordTable_info").css("display","none"),$("#ExternalGameDividendRecordTable_paginate").css("display","none"),$("#DividendRecordTable").css("display",""),$("#DividendRecordTable_info").css("display",""),$("#DividendRecordTable_paginate").css("display",""),table=$("#DividendRecordTable").dataTable({processing:!0,serverSide:!0,bDestroy:!0,sDom:'rt<"bottom"ilp>',iDisplayLength:25,bLengthChange:!1,bFilter:!1,bsort:!0,order:[[3,"desc"]],language:{url:"/Content/dataTables/Chinese.txt"},ajax:{url:"/DividendContract/Search",type:"POST",data:function(n){n.__RequestVerificationToken=$('input[name="__RequestVerificationToken"]').val();n.DateSection=$("#DateSection").val();n.Type=$("#Type").val();n.DescendantLoginID=$("#DescendantLoginID").val();n.GameType=$("#GameTypeId").val()},error:function(n){if(!IsGlobalAjaxErrorCode(n.status)){$("#CashFlowRecordTable_processing").css("display","none");$("#ErrorDialog .modal-body").html("发收错误,详情请洽客服人员。");$("#ErrorDialog .modal-title").html("错误讯息");$("#ErrorDialog").modal("show");return}}},columns:[{data:"DescendantLoginID"},{name:"StartTime",data:"StartTimeStr"},{name:"EndTime",data:"EndTimeStr"},{name:"BetAmount",data:function(n){return Math.round(n.BetAmount*1e3)/1e3}},{data:"DividendRate"},{name:"Lose",data:function(n){return Math.round(n.Lose*1e3)/1e3}},{name:"DividendAmount",data:function(n){return Math.round(n.DividendAmount*1e3)/1e3}},{name:"State",data:function(n){return n.State==DividendPaymentState.WAITING?"<span id='state"+n.ID+"'><a  class='stateConfirm btn btn-default btn-xs'id='"+n.ID+"' href='#' onclick='return false;' >"+n.StateStr+"<\/a><br/><a  class='outOfPlatformConfirm btn btn-default btn-xs'name='"+n.ID+"' href='#' onclick='return false;' >平台外发放<\/a><\/span>":n.State==DividendPaymentState.CONFIRM?n.StateStr:n.State==DividendPaymentState.OUTOFPLATFORMCONFIRM?"平台外发放完毕":n.State==DividendPaymentState.OUTOFPLATFORM?"平台外发放确认中":n.State==DividendPaymentState.OVERTIME?"<span id='state"+n.ID+"'>逾期未发放<a  class='stateConfirm btn btn-default btn-xs'id='"+n.ID+"' href='#' onclick='return false;' >逾期补发<\/a><br/><a  class='outOfPlatformConfirm btn btn-default btn-xs'name='"+n.ID+"' href='#' onclick='return false;' >逾期平台外发放<\/a><\/span>":n.State==DividendPaymentState.FORCECONFIRM?"强制发放":n.State==DividendPaymentState.NODIVIDEND?"不需分红":n.State==DividendPaymentState.OVERTIMECONFIRM?"逾期补发":n.State==DividendPaymentState.OVERTIMEOUTOFPLATFORM?"逾期平台外发放确认中":n.State==DividendPaymentState.OVERTIMEOUTOFPLATFORMCONFIRM?"逾期平台外发放完毕":n.State==DividendPaymentState.CANCELDIVIDEND?"取消分红":n.DividendAmount==0?"不需分紅":""}}],fnDrawCallback:function(u){datasource=u.json.data;$(".stateConfirm").click(function(){n=$(this).attr("id");for(var u=0;u<datasource.length;u++)n==datasource[u].ID&&(t=datasource[u]);$("#stateConfirmDialog").text("发放分红"+t.DividendAmount+"元给下级"+t.DescendantLoginID+"，您确定要发放吗?");$("#stateConfirmDialog").dialog({resizable:!1,modal:!1,title:"确认提示",position:{my:"center",at:"center-225 top+300",of:r},width:500,buttons:{"确定":function(){$(this).dialog("close");$.ajax({type:"POST",url:"/DividendContract/ConfirmPayment",data:{__RequestVerificationToken:i,ID:n}}).done(function(t){if(t.Success){$("#SuccessConfirmDialog").text("发放分红成功，请重新整理您的钱包确认金额。");warningMessage("发放分红成功，请重新整理您的钱包确认金额。",null);$("#SuccessConfirmDialog").dialog({resizable:!1,modal:!1,width:500,buttons:{"确认":function(){$(this).dialog("close")}}});var i="state"+n;$("#"+i).html("已发放完毕");return}if(t.notEnoughMoney){warningMessage("余额不足。",null);$("#SuccessConfirmDialog").text("余额不足。");$("#SuccessConfirmDialog").dialog({resizable:!1,modal:!1,width:500,buttons:{"确认":function(){$(this).dialog("close")}}});return}}).fail(function(n){IsGlobalAjaxErrorCode(n.status)||(warningMessage("发放失败。",null),$("#SuccessConfirmDialog").text("发送失败。"),$("#SuccessConfirmDialog").dialog({resizable:!1,modal:!1,width:500,buttons:{"确认":function(){$(this).dialog("close")}}}))})},"取消":function(){$(this).dialog("close")}}})});$(".outOfPlatformConfirm").click(function(){n=$(this).attr("name");for(var u=0;u<datasource.length;u++)n==datasource[u].ID&&(t=datasource[u]);$("#outOfPlatformConfirmDialog").text("您確定要與下級"+t.DescendantLoginID+"平台外发放吗?");$("#outOfPlatformConfirmDialog").show();$("#outOfPlatformConfirmDialog").dialog({resizable:!1,modal:!1,title:"确认提示",width:500,position:{my:"center",at:"center-225 top+300",of:r},buttons:{"确定":function(){$(this).dialog("close");$.ajax({type:"POST",url:"/DividendContract/OutOfPlatformSubmit",data:{__RequestVerificationToken:i,ID:n}}).done(function(){warningMessage("已发出平台外发放请求，请等待下级确认。",null);$("#SuccessConfirmDialog").text("已发出平台外发放请求，请等待下级确认。");$("#SuccessConfirmDialog").dialog({resizable:!1,modal:!1,width:500,buttons:{"确认":function(){$(this).dialog("close")}}});var t="state"+n;$("#"+t).html("平台外发放确认中");return}).fail(function(n){IsGlobalAjaxErrorCode(n.status)||(warningMessage("发放失败。",null),$("#SuccessConfirmDialog").text("发放失败。"),$("#SuccessConfirmDialog").dialog({resizable:!1,modal:!1,width:500,buttons:{"确认":function(){$(this).dialog("close")}}}))})},"取消":function(){$(this).dialog("close")}}})})}})):($("#DividendRecordTable").css("display","none"),$("#DividendRecordTable_info").css("display","none"),$("#DividendRecordTable_paginate").css("display","none"),$("#ExternalGameDividendRecordTable").css("display",""),$("#ExternalGameDividendRecordTable_info").css("display",""),$("#ExternalGameDividendRecordTable_paginate").css("display",""),table=$("#ExternalGameDividendRecordTable").dataTable({processing:!0,serverSide:!0,bDestroy:!0,sDom:'rt<"bottom"ilp>',iDisplayLength:25,bLengthChange:!1,bFilter:!1,bsort:!0,order:[[3,"desc"]],language:{url:"/Content/dataTables/Chinese.txt"},ajax:{url:"/DividendContract/Search",type:"POST",data:function(n){n.__RequestVerificationToken=$('input[name="__RequestVerificationToken"]').val();n.DateSection=$("#DateSection").val();n.Type=$("#Type").val();n.DescendantLoginID=$("#DescendantLoginID").val();n.GameType=$("#GameTypeId").val()},error:function(n){if(!IsGlobalAjaxErrorCode(n.status)){$("#CashFlowRecordTable_processing").css("display","none");$("#ErrorDialog .modal-body").html("发收错误,详情请洽客服人员。");$("#ErrorDialog .modal-title").html("错误讯息");$("#ErrorDialog").modal("show");return}}},columns:[{data:"DescendantLoginID"},{name:"StartTime",data:"StartTimeStr"},{name:"EndTime",data:"EndTimeStr"},{name:"Lose",data:function(n){return Math.round(n.Lose*1e3)/1e3}},{data:"DividendRate"},{name:"DividendAmount",data:function(n){return Math.round(n.DividendAmount*1e3)/1e3}},{name:"State",data:function(n){return n.State==DividendPaymentState.WAITING?"<span id='state"+n.ID+"'><a  class='stateConfirm btn btn-default btn-xs'id='"+n.ID+"' href='#' onclick='return false;' >"+n.StateStr+"<\/a><br/><a  class='outOfPlatformConfirm btn btn-default btn-xs'name='"+n.ID+"' href='#' onclick='return false;' >平台外发放<\/a><\/span>":n.State==DividendPaymentState.CONFIRM?n.StateStr:n.State==DividendPaymentState.OUTOFPLATFORMCONFIRM?"平台外发放完毕":n.State==DividendPaymentState.OUTOFPLATFORM?"平台外发放确认中":n.State==DividendPaymentState.OVERTIME?"<span id='state"+n.ID+"'>逾期未发放<a  class='stateConfirm btn btn-default btn-xs'id='"+n.ID+"' href='#' onclick='return false;' >逾期补发<\/a><br/><a  class='outOfPlatformConfirm btn btn-default btn-xs'name='"+n.ID+"' href='#' onclick='return false;' >逾期平台外发放<\/a><\/span>":n.State==DividendPaymentState.FORCECONFIRM?"强制发放":n.State==DividendPaymentState.NODIVIDEND?"不需分红":n.State==DividendPaymentState.OVERTIMECONFIRM?"逾期补发":n.State==DividendPaymentState.OVERTIMEOUTOFPLATFORM?"逾期平台外发放确认中":n.State==DividendPaymentState.OVERTIMEOUTOFPLATFORMCONFIRM?"逾期平台外发放完毕":n.State==DividendPaymentState.CANCELDIVIDEND?"取消分红":n.DividendAmount==0?"不需分紅":""}}],fnDrawCallback:function(u){datasource=u.json.data;$(".stateConfirm").click(function(){n=$(this).attr("id");for(var u=0;u<datasource.length;u++)n==datasource[u].ID&&(t=datasource[u]);$("#stateConfirmDialog").text("发放分红"+t.DividendAmount+"元给下级"+t.DescendantLoginID+"，您确定要发放吗?");$("#stateConfirmDialog").dialog({resizable:!1,modal:!1,title:"确认提示",position:{my:"center",at:"center-225 top+300",of:r},width:500,buttons:{"确定":function(){$(this).dialog("close");$.ajax({type:"POST",url:"/DividendContract/ConfirmPayment",data:{__RequestVerificationToken:i,ID:n}}).done(function(t){if(t.Success){$("#SuccessConfirmDialog").text("发放分红成功，请重新整理您的钱包确认金额。");warningMessage("发放分红成功，请重新整理您的钱包确认金额。",null);$("#SuccessConfirmDialog").dialog({resizable:!1,modal:!1,width:500,buttons:{"确认":function(){$(this).dialog("close")}}});var i="state"+n;$("#"+i).html("已发放完毕");return}if(t.notEnoughMoney){warningMessage("余额不足。",null);$("#SuccessConfirmDialog").text("余额不足。");$("#SuccessConfirmDialog").dialog({resizable:!1,modal:!1,width:500,buttons:{"确认":function(){$(this).dialog("close")}}});return}}).fail(function(n){IsGlobalAjaxErrorCode(n.status)||(warningMessage("发放失败。",null),$("#SuccessConfirmDialog").text("发送失败。"),$("#SuccessConfirmDialog").dialog({resizable:!1,modal:!1,width:500,buttons:{"确认":function(){$(this).dialog("close")}}}))})},"取消":function(){$(this).dialog("close")}}})});$(".outOfPlatformConfirm").click(function(){n=$(this).attr("name");for(var u=0;u<datasource.length;u++)n==datasource[u].ID&&(t=datasource[u]);$("#outOfPlatformConfirmDialog").text("您確定要與下級"+t.DescendantLoginID+"平台外发放吗?");$("#outOfPlatformConfirmDialog").show();$("#outOfPlatformConfirmDialog").dialog({resizable:!1,modal:!1,title:"确认提示",width:500,position:{my:"center",at:"center-225 top+300",of:r},buttons:{"确定":function(){$(this).dialog("close");$.ajax({type:"POST",url:"/DividendContract/OutOfPlatformSubmit",data:{__RequestVerificationToken:i,ID:n}}).done(function(){warningMessage("已发出平台外发放请求，请等待下级确认。",null);$("#SuccessConfirmDialog").text("已发出平台外发放请求，请等待下级确认。");$("#SuccessConfirmDialog").dialog({resizable:!1,modal:!1,width:500,buttons:{"确认":function(){$(this).dialog("close")}}});var t="state"+n;$("#"+t).html("平台外发放确认中");return}).fail(function(n){IsGlobalAjaxErrorCode(n.status)||(warningMessage("发放失败。",null),$("#SuccessConfirmDialog").text("发放失败。"),$("#SuccessConfirmDialog").dialog({resizable:!1,modal:!1,width:500,buttons:{"确认":function(){$(this).dialog("close")}}}))})},"取消":function(){$(this).dialog("close")}}})})}})))});$("#outOfPlatformSubmit").click(function(){$.ajax({type:"POST",url:"/DividendContract/OutOfPlatformSubmit",data:{__RequestVerificationToken:i,ID:n}}).done(function(){warningMessage("已发出平台外发放请求，请等待下级确认。",null);var t="state"+n;$("#"+t).html("平台外发放确认中");return}).fail(function(n){IsGlobalAjaxErrorCode(n.status)||($("#SuccessConfirmDialog").text("发放失败。"),$("#SuccessConfirmDialog").dialog({resizable:!1,modal:!1,width:500,buttons:{"确认":function(){$(this).dialog("close")}}}))})})}function TransferPointInit(){$("#Type").val()!=null?$(".TypeListMember").each(function(){$(this).val()==$("#Type").val()&&$("#TypeListTitle").html($(this).html())}):$("#TypeListTitle").html("转点类型");$(".SelectedType").click(function(n){n.preventDefault();$(".SelectedType").each(function(){$(this).removeClass("active");$(this).removeClass("selected");$(this).attr("disabled",!1)});$(this).addClass("active");$(this).addClass("selected");$(this).attr("disabled",!0);$("#SelectedTypeTitle").css("display","");$("#SelectedTypeTitle").html($(this).html())});$(".TypeListMember").click(function(n){n.preventDefault();$("#TypeListTitle").html($(this).html());$("#Type").val($(this).val());$(this).val()==CashFlowType.TRANSFERDEPOSIT&&($("#DepositInstructions").css("display",""),$("#ActivityInstructions").css("display","none"),$("#BonusInstructions").css("display","none"));$(this).val()==CashFlowType.TRANSFERBONUS&&($("#DepositInstructions").css("display","none"),$("#ActivityInstructions").css("display",""),$("#BonusInstructions").css("display","none"));$(this).val()==CashFlowType.TRANSFERCOMMISSION&&($("#DepositInstructions").css("display","none"),$("#ActivityInstructions").css("display","none"),$("#BonusInstructions").css("display",""))});$("#DescendantLoginID").val(DescendantLoginID)}function TransferPointCreateSubmit(){var n=$("#form");return n.valid()&&($("#submit").attr("disabled",!0),$.ajax({type:"POST",url:n.attr("action"),data:n.serialize()}).done(function(n){$("#Container").html(n);TransferPointInit();ShowDialog&&($("#dialog").text("转点成功。"),$("#dialog").dialog({modal:!0,buttons:{"确认":function(){$(this).dialog("close");window.location.replace("/AccountManagement/Players")}}}));$("#DescendantLoginID").val(DescendantLoginID);$("#Type").val(TypeValue);$("#submit").attr("disabled",!1)}).fail(function(n){IsGlobalAjaxErrorCode(n.status)||($("#dialog").text("转点失败。"),$("#dialog").dialog({modal:!0,buttons:{"确认":function(){$(this).dialog("close")}}}))})),!1}function SendEmailSubmit(){var n=$("#form");n.valid()&&$.ajax({type:"POST",url:n.attr("action"),data:n.serialize()}).done(function(n){n.res!=undefined?window.location.replace("/AccountCenter/AccountInfo"):$("#Container").html(n)}).fail(function(n){IsGlobalAjaxErrorCode(n.status)||($("#dialog").text("发送验证信失败。"),$("#dialog").dialog({modal:!0,buttons:{"确认":function(){$(this).dialog("close")}}}))})}function LineChartViewModel(){var n=this;n.disableSubmitButton=ko.observable(!1);n.Search=function(){n.disableSubmitButton(!0);var t=$("#form");t.valid()&&$.ajax({type:"POST",url:t.attr("action"),data:t.serialize(),beforeSend:function(){showloading("loadingMSG");$("#chart").unbind();$("#chart").empty()},complete:function(){hideloading()}}).done(function(t){n.disableSubmitButton(!1);t!=undefined&&($("#errormsg").text(""),DrawLineChart(t))}).fail(function(t){(n.disableSubmitButton(!1),IsGlobalAjaxErrorCode(t.status))||($("#errormsg").text("讀取人數資料錯誤"),$("#chart").unbind(),$("#chart").empty())})}}function InitLineChart(n,t){$("#linechartinfo").hide();$("#StartTime").datepicker({dateFormat:"yy/mm/dd"});$("#EndTime").datepicker({dateFormat:"yy/mm/dd"});$("#StartTime").datepicker($.datepicker.regional["zh-TW"]);$("#EndTime").datepicker($.datepicker.regional["zh-TW"]);$("#StartTime").datepicker("setDate",n);$("#EndTime").datepicker("setDate",t);var i=new LineChartViewModel;ko.applyBindings(i,document.getElementById("TeamSummary"))}function DrawLineChart(n){var t,c,l;typeof n!="undefined"&&(intervaluserinfo=n);var i=JSON.parse(intervaluserinfo),r=[],s=[],h=[],e=new Date($("#StartTime").val().toString()),o=new Date($("#EndTime").val().toString()),u=0,f=Number.MAX_VALUE;e.setDate(e.getDate()-1);o.setDate(o.getDate()+1);for(t in i[0])s.push([t,i[0][t]]),i[0][t]>u&&(u=i[0][t]),i[0][t]<f&&(f=i[0][t]);for(t in i[1])h.push([t,i[1][t]]),i[1][t]>u&&(u=i[1][t]),i[1][t]<f&&(f=i[1][t]);(c=u-f,document.getElementById("isCheckNews").checked?r.push(s):r.push([[]]),document.getElementById("isCheckBets").checked?r.push(h):r.push([[]]),$("#chart").unbind(),$("#chart").empty(),$.isEmptyObject(r[0][0])!=!0||$.isEmptyObject(r[1][0])!=!0)&&(l=$.jqplot("chart",r,{title:"走勢圖",animate:!1,seriesDefaults:{rendererOptions:{animation:{speed:2e3},line:!0},pointLabels:{show:!0}},axesDefaults:{labelRenderer:$.jqplot.CanvasAxisLabelRenderer},series:[{markerOptions:{style:"circle"},label:"News",color:"#40a5ab"},{markerOptions:{style:"circle"},label:"Bets",color:"#ea618c"}],axes:{xaxis:{min:e,max:o,label:"日期",renderer:$.jqplot.DateAxisRenderer,showGridline:!0,tickOptions:{formatString:"%e"},tickInterval:"1 day"},yaxis:{pad:0,min:f,max:Math.ceil(1.2*u),label:"人数",showGridline:!0,tickOptions:{formatString:"%d"},tickInterval:c<10?1:null}}}))}function checkRedraw(){$("#errormsg").text("");DrawLineChart()}function DailyTaskInit(){LoginRecordInit()}function IsGlobalAjaxErrorCode(n){return n==401?!0:!1}function DailyPayInit(n){for(var i=0,o,e,r,u,f,s,t=0;t<n;t++)if(r="DailyPayRuleContents_"+t+"__Amount",u="DailyPayRuleContents_"+t+"__Profit",f="DailyPayRuleContents_"+t+"__Loss",$("#"+r).val()!=""||$("#"+u).val()!=""||$("#"+f).val()!="")e="deleteRule"+t,$("#"+e).css("display","none"),i=t,i==n-1&&($("#addDailyPayRule").css("display","none"),$("#pinkPlus").css("display","none"));else break;for(t=1;t<=i;t++)o="dailypayrule"+t,$("#"+o).css("display","");if(HaveDailyPay==!0){for($("#DailyPayPrivateReturn").attr("readonly",!0),t=0;t<=i;t++)r="DailyPayRuleContents_"+t+"__Amount",u="DailyPayRuleContents_"+t+"__Profit",f="DailyPayRuleContents_"+t+"__Loss",$("#"+r).attr("readonly",!0),$("#"+u).attr("readonly",!0),$("#"+f).attr("readonly",!0);$("#ContractState").text(StateStr)}else $("#UserInfoLoginID").val(DescendantLoginID),$("#ContractState").text(StateStr);$("#EditRule").click(function(){var o=$("#UserInfoLoginID").val();$.ajax({type:"Post",url:"/DailyPay/CheckEdit",data:{LoginID:o,__RequestVerificationToken:$('input[name="__RequestVerificationToken"]').val()},success:function(o){if(o.state==!0){for($("#DailyPayPrivateReturn").attr("readonly",!1),t=0;t<=i;t++)r="DailyPayRuleContents_"+t+"__Amount",u="DailyPayRuleContents_"+t+"__Profit",f="DailyPayRuleContents_"+t+"__Loss",$("#"+r).attr("readonly",!1),$("#"+u).attr("readonly",!1),$("#"+f).attr("readonly",!1),e="deleteRule"+t,$("#"+e).css("display","");$("#Send").attr("disabled",!1);$("#addDailyPayRule").attr("disabled",!1);i>=n-1?($("#addDailyPayRule").css("display","none"),$("#pinkPlus").css("display","none")):($("#addDailyPayRule").css("display",""),$("#pinkPlus").css("display",""))}else o.errMsg.length>0?warningMessage(o.errMsg,null):warningMessage("禁止修改，请联络服务人员。",null)}})});$("#create").click(function(){if($("input[name='IsPrivateReturn']:checked").length==0){warningMessage("请至少选择一个方案。",null);return}if(s=0,$("input[name='IsPrivateReturn']:checked").val()=="False")for(t=0;t<=i;t++){if(r="DailyPayRuleContents_"+t+"__Amount",u="DailyPayRuleContents_"+t+"__Profit",f="DailyPayRuleContents_"+t+"__Loss",$("#"+r).val().length==0||$("#"+u).val().length==0||$("#"+f).val().length==0){warningMessage("栏位不可空白。",null);return}if(parseInt(s)>=parseInt($("#"+r).val())){warningMessage("日工资日量请依序由小至大设定。",null);return}s=$("#"+r).val()}else{if($("#DailyPayPrivateReturn").val().length==0){warningMessage("私返栏位不可空白。",null);return}if(parseFloat($("#DailyPayPrivateReturn").val())<=0){warningMessage("私返设定请大于0。",null);return}}var n=$("#form");n.valid()&&n.submit()});$("#Send").click(function(){if(s=0,$("input[name='IsPrivateReturn']:checked").val()=="False")for(t=0;t<=i;t++){if(r="DailyPayRuleContents_"+t+"__Amount",u="DailyPayRuleContents_"+t+"__Profit",f="DailyPayRuleContents_"+t+"__Loss",$("#"+r).val().length==0||$("#"+u).val().length==0||$("#"+f).val().length==0){warningMessage("栏位不可空白。",null);return}if(parseInt(s)>=parseInt($("#"+r).val())){warningMessage("日工资日量请依序由小至大设定。",null);return}s=$("#"+r).val()}else{if($("#DailyPayPrivateReturn").val().length==0){warningMessage("私返栏位不可空白。",null);return}if(parseFloat($("#DailyPayPrivateReturn").val())<=0){warningMessage("私返设定请大于0。",null);return}}confirmMessage("修改下级"+$("#UserInfoLoginID").val()+"日工资?",function(){var n=$("#form");n.valid()&&n.submit()})});$("#DeleteDailyPay").click(function(){var n=$("#UserInfoLoginID").val();confirmMessage("删除下级"+n+"日工资?",function(){$("#DeleteDailyPay").attr("disabled",!0);$.ajax({type:"POST",url:"/DailyPay/Delete",data:{LoginID:n,__RequestVerificationToken:$('input[name="__RequestVerificationToken"]').val()},success:function(t){if(t.state==!0){var i="/DailyPay/CreateDailyPay?LoginID="+n;warningMessage("删除成功。",i)}else t.errMsg.length>0?warningMessage(t.errMsg,null):warningMessage("删除失败，请联络服务人员。",null)},fail:function(n){IsGlobalAjaxErrorCode(n.status)||warningMessage("删除失败，请联络服务人员。",null)},complete:function(){$("#DeleteDailyPay").attr("disabled",!1)}})})});$("#addDailyPayRule").click(function(){i>=14||(i+=1,e="deleteRule"+i,o="dailypayrule"+i,$("#"+o).css("display",""),$("#"+e).css("display",""),i>=14&&($("#addDailyPayRule").css("display","none"),$("#pinkPlus").css("display","none")))});$(".deleteRule").click(function(){$("#addDailyPayRule").css("display","");$("#pinkPlus").css("display","");e="deleteRule"+i;o="dailypayrule"+i;$("#"+o).css("display","none");$("#"+e).css("display","none");r="DailyPayRuleContents_"+i+"__Amount";u="DailyPayRuleContents_"+i+"__Profit";f="DailyPayRuleContents_"+i+"__Loss";$("#"+r).attr("readonly",!1);$("#"+u).attr("readonly",!1);$("#"+f).attr("readonly",!1);$("#"+r).val(null);$("#"+u).val(null);$("#"+f).val(null);i-=1;e="deleteRule"+i;$("#"+e).css("display","")})}function DailyPayRecordInit(n,t){var i=$('input[name="__RequestVerificationToken"]').val();table=$("#DailyPayRecordTable").dataTable({sDom:'rt<"bottom"ilp>',iDisplayLength:25,bLengthChange:!1,bFilter:!1,bDestroy:!0,bSort:!1,language:{url:"/Content/dataTables/Chinese.txt"}});$("#StartTime").datepicker({dateFormat:"yy/mm/dd"});$("#EndTime").datepicker({dateFormat:"yy/mm/dd"});$("#StartTime").datepicker($.datepicker.regional["zh-TW"]);$("#EndTime").datepicker($.datepicker.regional["zh-TW"]);$("#StartTime").datepicker("setDate",n);$("#EndTime").datepicker("setDate",t);$("#search").click(function(){CheckTimeIsValid()&&(table=$("#DailyPayRecordTable").dataTable({processing:!0,serverSide:!0,bDestroy:!0,sDom:'rt<"bottom"ilp>',iDisplayLength:25,bLengthChange:!1,bFilter:!1,bsort:!0,order:[[1,"desc"]],language:{url:"/Content/dataTables/Chinese.txt"},ajax:{url:"/DailyPay/Search",type:"POST",data:function(n){n.__RequestVerificationToken=$('input[name="__RequestVerificationToken"]').val();n.StartTime=$("#StartTime").val();n.EndTime=$("#EndTime").val();n.Type=$("#Type").val();n.DescendantLoginID=$("#DescendantLoginID").val();n.GameType=$("#GameTypeId").val()},error:function(n){if(!IsGlobalAjaxErrorCode(n.status)){$("#ErrorDialog .modal-body").html("发收错误,详情请洽客服人员。");$("#ErrorDialog .modal-title").html("错误讯息");$("#ErrorDialog").modal("show");return}}},columns:[{data:"UserInfoLoginID"},{name:"RecordDate",data:"RecordDateStr"},{name:"DailyPayEarn",data:function(n){return Math.round(n.DailyPayEarn*1e3)/1e3}},{name:"State",data:function(n){return n.State==DailyPayRecordState.WAITING?"<span id=state"+n.ID+">"+n.StateStr+"&nbsp;&nbsp;<a  class='stateConfirm btn btn-default btn-xs'id="+n.ID+" href='#' onclick=SendDailyPayEarn("+n.ID+",'"+n.DailyPayEarn+"','"+n.UserInfoLoginID+"') >发放<\/a><br/>":n.State==DailyPayRecordState.CONFIRM||n.State==DailyPayRecordState.CANCEL?n.StateStr:n.State==DailyPayRecordState.AGENTWALLETAMOUNTNOTENOUGH?"<span id=state"+n.ID+">"+n.StateStr+"&nbsp;&nbsp;<a  class='stateConfirm btn btn-default btn-xs'id="+n.ID+" href='#' onclick=SendDailyPayEarn("+n.ID+",'"+n.DailyPayEarn+"','"+n.UserInfoLoginID+"') >发放<\/a><br/>":""}}],fnDrawCallback:function(n){datasource=n.json.data;$("#mainPage").show()}}))})}function SendDailyPayEarn(n,t,i){$("#stateConfirmDialog").text("发放日工资"+t+"元给下级"+i+"，您确定要发放吗?");$("#stateConfirmDialog").dialog({resizable:!1,modal:!1,title:"确认提示",width:500,buttons:[{text:"确定",id:"confirmBtn",click:function(){$(this).dialog("close");$.ajax({type:"POST",url:"/DailyPay/ConfirmDailyPay",data:{__RequestVerificationToken:$('input[name="__RequestVerificationToken"]').val(),ID:n,LoginID:i}}).done(function(t){if(t.Success){warningMessage("发放日工资成功，请重新整理您的钱包确认金额。",null);var i="state"+n;$("#"+i).html("发放完成");return}warningMessage("发放日工资失败，请检查余额是否不足。",null);return}).fail(function(n){IsGlobalAjaxErrorCode(n.status)||warningMessage("发放日工资失败。",null)})}},{text:"取消",id:"cancelBtn",click:function(){$(this).dialog("close")}}],close:function(){$(this).dialog("close")}})}function ShowNotify(n,t){(n==NotifyType.DEPOSIT||n==NotifyType.DRAW||n==NotifyType.TRANSFER)&&(textarr.push(t),textarr.length==1&&showAwardNotifyWindow())}function GetAccountSecurityActivityInit(n){n=Date.parse(n).valueOf();var t=Date.parse(activityModel[0].StartTime).valueOf(),i=Date.parse(activityModel[0].EndTime).valueOf();activityModel[0].AccountSecurityCount<activityModel[0].ActivityConditions[0].value?$("#GetPrize").text("0"):activityModel[0].rewards>0?($("#OKget").hide(),$("#NOget").show()):activityModel[0].rewards==0&&t<=n&&i>=n&&($("#GetPrize").text(activityModel[0].ActivityConditions[0].prize),$(".m-button-R").removeClass("disabled"))}function showCollectionBetNotifyWindow(){if(collectionBetTextarr.length!=0){var n=collectionBetTextarr[0].split("|"),t=$("#collectionBetNotifyWindow");$("#collectionBetNotifyWindowTitle").text(n[0]);$("#collectionBetNotifyWindowGameName").text(LotteryGames[n[1]].LotteryGameName);$("#collectionBetNotifyWindowBetType").text(n[2]);$("#collectionBetNotifyWindowNumber").text(n[3]);$("#collectionBetNotifyWindowContinueCnt").text(n[4]);$("#collectionBetNotifyWindowMissCnt").text(n[5]);$("#collectionBetNotifyWindowRecentResult").text(n[6]);collectionBetTextarr.shift();t.show(600);t.find(".alert-close").unbind("click").click(i);collectionBetNotifyWindowTimer=setTimeout(function(){i()},5e3);function i(){t.hide(600);clearTimeout(collectionBetNotifyWindowTimer);showCollectionBetNotifyWindow()}}}function WithdrawRequestCreateInit(){MaxDrawTimePerDay==0?$("#MaxDrawTimePerDay").html("无限"):$("#MaxDrawTimePerDay").html(MaxDrawTimePerDay);$("#BankCardID").val()!=null?$(".BankListMember").each(function(){$(this).val()==$("#BankCardID").val()&&$("#BankListTitle").html($(this).html())}):$("#BankListTitle").html("请选择银行卡");$("#Amount").keydown(function(){ShowChinesesNumberAndDrawFee()});$("#Amount").keyup(function(){ShowChinesesNumberAndDrawFee()});ShowChinesesNumberAndDrawFee();$(".BankListMember").click(function(){$("#BankListTitle").html($(this).html());$("#BankCardID").val($(this).val())});$("BankCardID").selectedIndex=-1}function ThirdPartyPaymentAndBankDepositCreateInitSubmit(){$("#create").click(function(){var n=$("#form"),i,t;if(n.valid()){if($("#create").prop("disabled",!0),i=parseInt($("#Amount").val()),minamount=$("#BankDepositSelect option:selected").attr("data-min"),maxamount=$("#BankDepositSelect option:selected").attr("data-max"),$("#BankAccountID").val($("option:selected","#BankDepositSelect").val()),$("#BankCode").val($("option:selected","#BankDepositSelect").attr("id")),!$.isNumeric(maxamount))return $("#BankAccountValidationMessage").html("请选择入款银行!"),$("#create").attr("disabled",!1),!1;if($("#BankAmountValidationMessage").html(""),i<minamount||i>maxamount)return $("#AmountValidationMessage").html("请输入正确的金额。"),$("#create").attr("disabled",!1),!1;if($("#Name").val($.trim($("#Name").val())),typeID==DepositAccountType.ALIPAY&&$("#BankDepositSelect option:selected").attr("data-DepositMethod")==DepositRequestMethod.Deposit&&$("#Name").val().length<=0)return $("#NameValidationMessage").html("请输入入款人姓名。"),$("#create").attr("disabled",!1),!1}if($("option:selected","#BankDepositSelect").attr("id")=="PERSONALWEIXIN"){$("#form").attr("action","/DepositRequest/CreateFast");n.submit();return}if($("#DepositMethod").val()==DepositRequestMethod.Deposit)n.submit();else if($("#DepositMethod").val()==DepositRequestMethod.ThirdPartyPaymentDeposit){if($("input[name=BankAccountID]:checked").attr("data-chooseBank")!=""&&$("input[name=BankAccountID]:checked").attr("data-chooseBank")=="True"&&($("#ThirdPartyPaymentBank").val()==""||$("#ThirdPartyPaymentBank").val()==null))return $("#create").attr("disabled",!1),$("#ThirdBankValidationMessage").html("请选择银行。"),!1;$("#create").prop("disabled",!0);n=$(this).parents("form");n.valid()?(t=window.open(""),$.ajax({type:"POST",url:n.attr("action"),data:n.serialize()}).done(function(n){if(typeof n.Failed!="undefined"&&n.Failed==!0){t.close();$(frameID).html(n.content);return}n.demosite!=undefined?location.reload():(t.document.write(n),t.document.close(),location.reload())}).fail(function(n){IsGlobalAjaxErrorCode(n.status)||(alert("充值失败"),$("#create").prop("disabled",!1))})):$("#create").prop("disabled",!1)}})}function DisplayTransferPointWHC(){var n=getTopWindow().document,t=$("#IsEnabledTransferPoint",n).val();t=="true"?$("a[id^='TransferPointRecordLink']").css("display",""):$("a[id^='TransferPointRecordLink']").css("display","none")}function AwardDetailInit(){function n(n){$("#awardDetails").empty();for(var t=0;t<awardData.length;t++)if(awardData[t].id==n){ShowAwardDetail(awardData[t]);break}}ShowAwardDetail(awardData[0]);$(".LotteryGame").click(function(){n($(this).val())})}function ShowAwardDetail(n){$("#maxPerIssue").text(n.maxIssue.toString());$("#maxPerDanTiao").text(n.maxDanTiao.toString());$.each(n.types,function(t,i){if(i!=undefined){var r=DetailsContent(i,n.floorOdds,n.point,n.offset,n.name),u="<tr class='bdot'><td>%s<\/td><td>%s<\/td><td>%s<\/td><\/tr>";u=u.replace("%s",r.awardName).replace("%s",r.typeName).replace("%s",r.awardMoney);$("#awardDetails").append(u)}})}function BuoyReadyExcute(){$("#BetParticularPeriodBuoy div").removeClass();$("#BetParticularPeriodBuoy div").addClass("BetParticularPeriodReady");$("#BetParticularPeriodBuoy a").attr("disabled","true");$("#BetParticularPeriodBuoy").show()}function BuoyStartExcute(){$("#BetParticularPeriodBuoy div").removeClass();$("#BetParticularPeriodBuoy div").addClass("BetParticularPeriodStart");$("#BetParticularPeriodBuoy a").removeAttr("disabled");$("#BetParticularPeriodBuoy").show()}function BuoyEndExcute(){$("#BetParticularPeriodBuoy div").removeClass();$("#BetParticularPeriodBuoy a").removeAttr("disabled");$("#BetParticularPeriodBuoy").hide()}var clipboard,lotterygameInitialized=!1,haveMyDividendContract=!1,haveDividendContractPermission=!1,sammyApp,awardNotifyWindowTimer,Condition,Activity,collectionBetNotifyWindowTimer;$("#awardNotifyWindowCloseButton").click(function(){var n=$("#awardNotifyWindow");n.hide(500)});Condition=function(n,t,i,r,u,f){var e=this;e.id=t;e.text=i;e.value=r;e.prize=u;e.html=i+r+' <span class="Give">送<\/span>'+u+"元";e.isReceivable=ko.observable(f);e.parent=n;e.openDialog=function(n){$("#confirmDialogText").text(n.parent.repeatable()==!1?"只限领取一次，确定领取?":"領取之後，將重新累計，確定領取?");$("#confirmDialog").dialog("open").dialog({buttons:{"确定":function(){e.receivePrize(n);$(this).dialog("close")},"取消":function(){$(this).dialog("close")}}})};e.receivePrize=function(n){var t=$('input[name="__RequestVerificationToken"]').val();$.ajax({url:"/Activity/AddActivityPrize",type:"POST",data:{__RequestVerificationToken:t,ID:n.id},success:function(t){t.State==ActivityStateForUser.Invalid?(n.isReceivable(!1),$("#messageDialogText").text("领取条件不存在!")):t.State==ActivityStateForUser.Failed?(n.isReceivable(!1),n.parent.accumulations(t.Accumulations),n.parent.rewards(t.Rewards),$("#messageDialogText").text("领取奖金失败!")):t.State==ActivityStateForUser.PrizeAlreadyReceived?(n.isReceivable(!1),n.parent.accumulations(t.Accumulations),n.parent.rewards(t.Rewards),$("#messageDialogText").text("奖金已领取，请勿重复领取!")):t.State==ActivityStateForUser.Disabled?(n.isReceivable(!1),n.parent.accumulations(t.Accumulations),n.parent.rewards(t.Rewards),$("#messageDialogText").text("领取奖金成功。")):t.State==ActivityStateForUser.StillOpened&&(n.parent.accumulations(t.Accumulations),n.parent.rewards(t.Rewards),$("#messageDialogText").text("领取奖金成功，可继续领取。"));$("#messageDialog").dialog("open").dialog({buttons:{"确定":function(){$(this).dialog("close")}}})}})}};Activity=function(n,t,i,r,u,f,e,o){var s=this;s.title=ko.observable(n);s.description=ko.observable(t);s.startTime=ko.observable(i);s.endTime=ko.observable(r);s.duration="("+s.startTime()+" ~ "+s.endTime()+")";s.repeatable=ko.observable(u);s.accumulations=ko.observable(f);s.rewards=ko.observable(e);s.iconFilePath=ko.observable(o);s.isVisible=ko.computed(function(){return s.repeatable()==!1&&s.rewards()>0?!1:!0},s);s.rewardsText=ko.computed(function(){return s.rewards()+"元 "+(s.repeatable()==!1&&s.rewards()>0?"(已领取完毕)":"")},s);s.conditions=ko.observableArray()}